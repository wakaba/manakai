2006-01-22  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (plCodeFragment): A returning |#EOF| case
	was missing so that illegal character was appended to the sequence.

2006-01-21  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plGeneratePerlModuleFile): Use |getAnyResource| 
	method instead of |getResource| method to obtain
	resource from URI listed in |disGetRequiredModuleURI| 
	in |PerlCode| objects.  This fix removes the problem
	that some expected |require| statements were not generated.

	* DPG.dis (plCodeFragment): Default |token-error| code was 
	not generated.
	(pg:qRequiresNextTokenStatement): New element type.

	* Test.dis: Wrong namespace URI in some resource names are fixed.
	(assertDOMTreeEquals): Adds node type
	information to node path string in error messages.
	Allows |false| value as a |null|.
	(TDTParser): Node type |entity| and |entity-reference|
	are changed to |general-entity| and |general-entity-reference|
	respectively.
	(lexmode default): Definition for the token |SEMICOLON|
	was missing.
	(token-error default): Added.

2006-01-20  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (plCodeFragment): Sets |param| value of default
	for default parse error handler to avoid array dereference error.

	* Test.dis (assertDOMTreeEquals): New method.

2006-01-11  Wakaba  <wakaba@suika.fam.cx>

	* Test.dis (TDTParser): New.
	(PARSE_ERR): New exception type.
	
2006-01-07  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plCodeFragment): Checks dupulications in
	implementing feature list (for score computation) and
	in |ManakaiNode| property list.  (The later led
	|NodeStem| objects that should not free'ed yet being free'ed.)

2006-01-07  Wakaba  <wakaba@suika.fam.cx>

	* Test.dis (id): New attribute.
	(assertNumEquals, assertNumNotEquals): New methods.
	(assertISA): New method.

2006-01-04  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plCodeFragment): New roles |ElementTypeDefinitionRole|
	and |AttributeDefinitionRole| implemented.

2005-12-29  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (bad-token-error): Severity changed
	to |SEVERITY_FATAL_ERROR|.

2005-12-28  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis: |?default-token| statement is supported.

2005-12-28  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (plCodeFragment): Pushes |pop @ch| rather
	than |$ch| if an acception clause follows to a code block
	generated from a child match statement so that tokenizer
	does do the correct thing.  Support for |builtin:nestedBlockAsText|
	special rule is removed.  |pg:ifTrueStatement| is
	supported.  |pg:returnStatement| is supported.

2005-12-27  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (VALIDITY_ERR): New error code.
	($merge_adjacent_range): New subfunction.  Adjacent character
	ranges are now merged so that |if| conditions in
	scanner methods are simplified.
	($array_uniq): New subfunction.  Filters states so that
	state number don't explode.
	(plCodeFragment): Now a DPG parser can have more than
	one tokenizer.  The |pg:qMatch| rvalue is supported.
	(DPGMatchStatementElement): The match statement 
	now accepts attributes.
	(DPGRuleRefStatementElement): The ruleref statement
	now accepts attributes.
	(AttributeSpecificationList): The attribute specification
	now accepts a |NAME| as an attribute value as well
	as |STRING|s.
	(CodeBlock): The |pg:qLexmodeStatement| is supported.
	(lexmode.default): |QKEYWORD| token type is added.
	(ErrDef): Errors |unique-lexmode-name-error|, |rule-not-defined-error|,
	|lexmode-not-defined-error| and properties added.

2005-12-25  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (dpgGetAttributeList): New method.
	(plCodeFragment): |:terminator?| option for a match
	block is supported.  |pg:matchElseBlock| is implemented.

2005-12-24  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (DISResourcePerl.plName): Implemented
	for |DISLang:AnyClass| resources.
	(DISResourcePerl.getPerlNameList): Don't prefix by |UNDERLINE|
	if the name comes from |DISPerl:methodName| attribute
	in case the method is for internal use.
	(DISResourcePerl.plCodeFragment): Generates return
	value convertion code from |DISLang:OutputProcessor| for
	attribute getter.  |ecore:textFormatter| attribute is
	implemented.  |Muf2003:RuleDefClass| is implemented.
	
	* DPG.dis (token-error): Packs error location 
	information into the error object.
	(DPGExceptionFormatter): New interface.

2005-12-23  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis: |token-error| implemented.  Embed statements
	now accept attributes.
	(DPGException): New exception.
	(DPGEmbedStatementElement): New interface.
	(parseString): May throw |PARSE_ERR| exception.
	(token-error): Reports |DOMError| and then throw |DPGException|
	with code |PARSE_ERR|.

2005-12-23  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis: External rule reference supported.  Variables
	in |lAssignmentStatement| are supported; support
	for |lRuleRef|s is removed.  Character class |anyChar| (|.|)
	is supported (but might be buggy in NFA -> DFA convertion).
	|perl-name| attribute supported.  Comment line introducing
	sequence is changed from |;;| to |//|.  Comment phrase (C++
	style comment) is introduced.  New |token-error| block
	is introduced (but not implemented yet).

2005-12-23  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis: Closures are modified not to "close" lexical
	variable but to receive them as arguments.  Frees recursive
	code references explicitly so that they don't lead a
	memory leak.  The first name token in embed statement
	is now expanded as a QName.

2005-12-22  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis: |LEXMODE|, |MY|, and |RULE| token types are removed
	and replaced with |NAME| with value match statements.

2005-12-21  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis: Support for |DOMCore:DOMConfigurationParameterApplication|
	resource type is added.

	* DPG.dis (___report_error): New method.
	(domConfig): New attribute.
	(error-handler): New supported configuration parameter.

2005-12-21  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis: Syntax and code generator now support |#RESERVED| token
	name in match statements.  My statements now accepts 
	attributes and |return| attribute indicates that the variable
	should be the return value.
	(DPGMyStatementElement): New interface.

2005-12-20  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (plCodeFragment): Output code to check lower bound
	of range even if it is zero (U+0000) since an negative value
	might occur to indicate end of file.  Code to generate |redo|
	statement is missing.  Embed statement with type |lang:Perl|
	support added.  Return value of |$next_token_required| was 
	missing in some cases.  Ruleref cache now takes |$next_token_required|
	values into acount.  Parameter (for parser subroutine) support
	was missing.
	(DPGParser.DISPerl:dpgDef): DPG definition for the DPG textual
	syntax merged.

	* Perl.dis: Now requires |DPG| module.
	(plGeneratePerlModule): Obsolete property name
	|DOMMetaImpl:providedThrough| changed into |f:through| so
	that |f:through|s in "dis" modules now works.  In addition,
	its default code was misplaced.  |DISPerl:dpgDef| attribute
	is supported so that DPG code are converted into a set of
	methods.

	* Value.dis: DPG (|lang:dpg|) support added.

2005-12-19  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis (pg:lAssignmentStatement): Typo in element type name
	fixed.
	(DPGParser): New interface.
	
2005-12-18  Wakaba  <wakaba@suika.fam.cx>

	* DPG.dis: New module.

2005-11-24  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plPreprocessPerlCode): |disPerl:WARNING| block
	is no longer supported.

2005-11-24  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plCodeFragment, plGeneratePerlModule): |DOMCore:DOMErrorType|
	objects are now supported.
	(plPreprocessPerlStatement): |DOMCore:ERROR| block-level element
	type support added.

2005-11-23  Wakaba  <wakaba@suika.fam.cx>

	* DNLite.dis: Bug on error depth fixed.

2005-11-23  Wakaba  <wakaba@suika.fam.cx>

	* Test.dis (setTestData): New method.

2005-11-20  Wakaba  <wakaba@suika.fam.cx>

	* DNLite.dis (forMatch): Matching rule revised so that
	multiple specification of same |For| URI with different
	operators work as intended.

	* Perl.dis: Typo fixed.

	* Test.dis: |uri| parameters added.

2005-11-17  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plCodeFragment): Placeholder for formatter rule
	definitions added.

2005-11-16  Wakaba  <wakaba@suika.fam.cx>

	* .cvsignore: New file.
	
2005-11-16  Wakaba  <wakaba@suika.fam.cx>

	* Test.dis (assertTrue, assertFalse, assertNever): New methods.
	(assertNull, assertNotNull): The |actualValue| parameters
	fixed to parameters rather than named parameters.

2005-11-15  Wakaba  <wakaba@suika.fam.cx>

	* Test.dis (assertNull, assertEquals, assertNotEquals,
	assertException): New methods.

2005-11-15  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis, DISDump.dis, DISPerl.dis (Require): References
	new |common.dis| module for the sake of |DIS:| module group.

	* common.dis: New module.

	* DISPerl.dis (plCodeFragment): Throws an exception
	if a "ISA" package does not have Perl name.

	* Value.dis: Type name |dis:TypeQName| changed to |DISCore:QName|.

2005-11-13  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plMufDescriptionText): Source property name
	is changed from |dis:Def| to |ecore:defaultMessage|.

2005-10-15  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plCodeFragment): Output processor ("DISLang:OutputProcessor")
	supported for methods.  "idl:void" type supported.

2005-10-14  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plGeneratePerlModule): Don't generate information
	on anydata* and irefnode0 properties since they are not used in fact.
	(plGeneratePerlModule, plCodeFragment): The 
	"DOMCore:DOMConfigurationParameter" type supported.

2005-10-13  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plIsFeatureImplemented): Don't check whether features
	are implemented for aliases.

2005-10-11  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plImplementation): Changed to direct
	instantiation of "ManakaiPCImplementation" class.
	(getPerlNameList, getPerlOperatorList): New methods.
	(plCodeFragment): Now allows subroutines having more than
	two method names and operators.
	(plMethodOperator): Removed.

2005-10-10  Wakaba  <wakaba@suika.fam.cx>

	* DNLite.dis (Require): Reference to "DIS/Perl.dis" added.

	* Perl.dis (Require): Reference to "PerlCode.dis" added.

2005-10-09  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plGeneratePerlModule): Generates information
	on new "mn:xrefnode0" property type.  Restored to generate 
	error definition method code for classes, not only
	interfaces, if there are error codes.

2005-10-08  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plCodeFragment): Ignores method name if it is a URI.

2005-10-08  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plGeneratePerlModule): Generates constant
	functions in interface packages.

2005-10-06  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plFullyQualifiedName): Fully qualified
	name of the constant function is now a name in 
	the package of the class (it was a name in module package).

	* Value.dis (getResource): Use "getAnyResource"
	method instead of "getResource" method.

2005-10-05  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis (parseDISDocInlineText): Allows "^" in
	tag (it is part of lexical type specification and
	it should have been allowed).

2005-10-02  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis (dd:id): Now it is an alias for "dis:ddid" property.

2005-10-01  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plLoadDISDatabaseModule): Accepts unknown module
	definitions.

2005-09-30  Wakaba  <wakaba@suika.fam.cx>

	* Value.dis (name): New attribute.

	* Perl.dis (plFullyQualifiedName): Use module's package
	name properties if available.

2005-09-29  Wakaba  <wakaba@suika.fam.cx>

	* DNLite.dis: Shares element type expanded URI where possible.

	* Value.dis: Shares data type URI where possible.

2005-09-28  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plGeneratePerlModule): Sorts constant
	function declarations by name.

2005-09-27  Wakaba  <wakaba@suika.fam.cx>

	* DNLite.dis: Use new DISModule->targetNamespaceURI attribute.

	* Perl.dis (plStore): Saves module definitions into
	database submodules.

2005-09-26  Wakaba  <wakaba@suika.fam.cx>

	* DISDump.dis: Removes reference to DISDoc module.
	(DIS:DISDump10): Requires "XML" version "3.0" and
	"XMLVersion" version "1.1".
	(ManakaiDISImplementationDISDump): No longer extends
	the "ManakaiDISImplementationDISDoc" class.

	* Perl.dis (plLoadDISDatabaseModule): Support
	for loading "for"s and modules.
	(plCodeFragment): New "mn:NodeRefRole" role support added.

2005-09-25  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plLoadDISDatabase): New "moduleResolver" parameter
	added.
	(plStore): New "moduleResolver" parameter added.
	(plLoadDISDatabaseModule): New method.

2005-09-24  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis (plCodeFragment): Takes hash key name
	from the database for "mn:node" and "DOMCore:read-only",
	where they were hardcoded.  For GetProp and SetProp
	dis tree element instructions, hash key name
	is shorten if shorter version is defined by "DISPerl:propHashKey"
	property of the corresponding resource in the database.
	(plAddHashKey): New method to check hash key name dupulication.
	(dp:plHashKey): New property.

	* Perl.dis, DNLite.dis, DISDoc.dis, DISDump.dis:
	Use "disPerl:H" instead of "disPerl:Q" for hash keys.

2005-09-23  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis: Modified to support new "dad" implementation.
	(DISElementDISDoc): Removed.
	(DVValueDISDoc): New.
	(documentionGroupId): This attribute values now 
	do not include element type names.

	* DNLite.dis (convertDISDocumentToDNLDocument): Fixed
	not to "tie" happens to cause strange segmentation fault.

	* Perl.dis (plCodeFragment): Support for the
	role "dv:ValurRole" added.  Property name "dis:AppName"
	is changed to more specific property names.  Throws
	an exception if an input processor has no Perl code
	definition.  A parameter value to "getPropertyValue"
	was missing.

	* Value.dis (dv:ValueRole): New role.
	(DVValue.getFeature): New method.
	(DVValue): Now extends DOMFeature:ManakaiHasFeatureByGetFeature
	so that it implements DOMFeature:GetFeature.

2005-09-21  Wakaba  <wakaba@suika.fam.cx>

	* Value.dis (DVValue): Extends DIS|NSResolverDIS.

	* DNLite.dis: "databaseArg" parameter added to some methods.
	(free, addNamespaceBinding, getDefaultNamespaceURIRef,
	getNamespaceBindingList): New methods.
	(DNLElement): Inherits DIS/Perl|DISElementPerl.
	(expandedURI, disGetAttribute, plImplementation): New.

	* Perl.dis (plCodeFragment): "databaseArg" parameter added.

2005-09-20  Wakaba  <wakaba@suika.fam.cx>

	* Value.dis (createDVValueRef): New method.  Now
	values are hold as scalar reference in ManakaiDVValue.
	(valueRef): New attribute.

	* DNLite.dis (ManakaiDISImplementationDNLite): Now extends
	class ManakaiDISImplementation.
	(convertDISDocumentToDNLDocument): Typo in class names fixed.
	For nodes, {child} property is now optional.
	(nodeIDRef, valueRef): New attributes.

2005-09-19  Wakaba  <wakaba@suika.fam.cx>

	* Value.dis (sourceNodePath): New attribute.
	(DVNSValue, DVNSOrderedList): New interfaces and classes.

	* Perl.dis: Some alias definitions moved from ../DIS.dis.
	The "namespaceContext" parameters added to some methods.
	(plCodeFragment): Now Perl'ize new DISCore:Integer typed string.
	(plImplementation): Directly instantiates PCImplementation
	to reduce overheads to find an implementation by ImplementationRegistry.

2005-09-15  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis: Some code modified to support new DIS.dis
	internal structure.

	* DISDump.dis (DISDumpAttributeElement): Now inherits
	DISDumpElementSelectCase interface and class.

2005-09-14  Wakaba  <wakaba@suika.fam.cx>

	* Value.dis: New module.

2005-09-13  Wakaba  <wakaba@suika.fam.cx>

	* Perl.dis: New module separated from ../DIS.dis.

2005-09-08  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis: Don't require MDOM:DOMHTML - now it requires
	only MDOM:DOMCore.
	(parseDISDocInlineText): Don't recognize as stago if a
	LESS-THAN SIGN is followed by a white space character.

2005-09-07  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis (parseDISDocInlineText): ddel:TFQ and ddel:C added to
	the list of element types which have implied lextype.

	* DISDump.dis (ref): DISDumpElementResource.resourceReference
	is moved to DISDumpElement.ref.
	(createChildByRefURI): New code fragment.
	(DISDumpElementDescription): New interface and class.
	The createDescription method is moved here.
	(DISDumpElementImplements): New interface and class.
	The appendNewImplements method is moved here.
	(DISDumpElementRDFClass): New interface and class.
	(DISDumpSubClassOfElement): New interface and class and element type.
	(DISDumpRaisesElement): Attributes are removed.
	(DISDumpRaisesCodeElement, DISDumpRaisesSubCodeElement):
	New interfaces, classes and element types.

2005-09-06  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis (documentationGroupID): Returns a string even
	if the documentation element does not has the dd:id attribute.
	(parseDISDocText): ddel:TODO element type added 
	to the list of element types in whose element a html5:p
	start tag can be implied.

2005-09-05  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis (parseDISDocText, parseDISDocInlineText): Removes
	leading and trailing spaces in start-tags.

2005-09-01  Wakaba  <wakaba@suika.fam.cx>

	* DISDump.dis (createFullName, hasFullName): New methods.

	* DISDoc.dis (parseDISDocText, getDISDocTree): New
	parameters defaultNameURI and defaultForURI added.

2005-08-31  Wakaba  <wakaba@suika.fam.cx>

	* DISDump.dis (@dump:isPartial): New attribute.

2005-08-30  Wakaba  <wakaba@suika.fam.cx>

	* DISDump.dis (isExceptionInterface): New attribute.
	(dump:exceptionInterface): Removed.

2005-08-27  Wakaba  <wakaba@suika.fam.cx>

	* DISDump.dis: dump:turi, dump:furi, dump:puri and other
	element types, attributes and interfaces added.

	* DISDoc.dis (Require): Now referrs DISlib:NaturalLanguage module.

2005-08-26  Wakaba  <wakaba@suika.fam.cx>

	* Makefile (dummy): Added.

2005-08-17  Wakaba  <wakaba@suika.fam.cx>

	* Makefile: New file.

2005-08-16  Wakaba  <wakaba@suika.fam.cx>

	* DISDump.dis: New module.

2005-08-15  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis (getDescription): Don't use $condition parameter
	if it is null.

2005-08-14  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis: Use HTML 5 element types rather than XHTML 2 ones.
	(parseDISDocInlineText, parseDISDocText): Unset (set empty text) 
	the xml:lang attribute if the natural language of the element is unable
	to be represented by the IETF language tags.
	(parseDISDocInlineText, parseDISDocText): Use original element
	type in the ddel: namespace URI rather than the XHTML 1 div element 
	type for the container elements.
	(splitElementContentByString, tfqnamesToElement): New code fragments.
	(qnameToElement): Revised to use splitElementContentByString.
	(parseDISDocInlineText): Now supports expansion of markup
	minimumization of lextypes dis:TypeQName, dis:TFQNames,
	DISPerl:MemRef and ManakaiDOM:XCodeRef.

2005-06-13  Wakaba  <wakaba@suika.fam.cx>

	* Markup.dis: New module (experimental, work in progress).

2005-05-29  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis: Lextype dis:TypeQName implemented.

2005-05-28  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis: disdoc parser implemented.

2005-05-26  Wakaba  <wakaba@suika.fam.cx>

	* DISDoc.dis: Interfaces other than parser implemented.

2005-05-23  Wakaba  <wakaba@suika.fam.cx>

	* ChangeLog: New file.

	* DISDoc.dis: New module.

