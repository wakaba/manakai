#!/usr/bin/perl 
## This file is automatically generated
## 	at 2005-10-09T13:36:12+00:00,
## 	from file "lib/Message/Util/ManakaiNode.dis",
## 	module <http://suika.fam.cx/~wakaba/archive/2005/manakai/Util/ManakaiNode>,
## 	for <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#Perl>.
## Don't edit by hand!
use strict;
package Message::Util::ManakaiNode;
our $VERSION = 20051009.1336;
package Message::Util::ManakaiNode::ManakaiDOMNodeObject;
our $VERSION = 20051009.1336;
push our @ISA, 'Message::Util::IF::NodeStem';
sub _change_tree_id ($$) {
my ($self, $treeID) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #29)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #27)"
unless 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #1)"
($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #2)"
'tid'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #3)"
} eq $treeID) {
  my @node = ($self);
  NODES: while (@node) {
    my $node = shift @node;
    next NODES unless UNIVERSAL::isa ($node,
                
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #4)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #5)"
);
      my @n;
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #6)"
'subnode2'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #7)"
}}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #8)"
'subnode'
#line 16 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #9)"
}}) {
        if (ref $p eq 'ARRAY') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #10)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 19 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #11)"
)
                            and
                            $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #12)"
'tid'
#line 21 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #13)"
} ne $treeID} @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #14)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 24 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #15)"
)
                            and $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #16)"
'tid'
#line 25 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #17)"
} ne $treeID}
                      values %$p;
        }
      }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #18)"
'origin'
#line 29 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #19)"
}},
               @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #20)"
'subnode0'
#line 30 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #21)"
}}) {
      push @node, $node->{$p}
        if defined $node->{$p} and
           $node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #22)"
'tid'
#line 33 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #23)"
} ne $treeID;
    }
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #24)"
'tid'
#line 35 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #25)"
} = $treeID;
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #26)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #28)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #30)"
}
}
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #53)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #51)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #31)"
@node = ($self);
NODES: while (@node) {
      my $node = shift @node;
      my @n;
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #32)"
'subnode2'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #33)"
}}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #34)"
'subnode'
#line 13 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #35)"
}}) {
        if (ref $p eq 'ARRAY') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #36)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 16 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #37)"
)
                            and defined $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #38)"
'nid'
#line 17 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #39)"
}} @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #40)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 20 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #41)"
)
                            and defined $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #42)"
'nid'
#line 21 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #43)"
}}
                       values %$p;
        }
      }
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #44)"
'origin'
#line 25 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #45)"
}},
             @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #46)"
'subnode0'
#line 26 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #47)"
}}) {
        push @node, $node->{$p}
          if defined $node->{$p} and
             defined $node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #48)"
'nid'
#line 29 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #49)"
};
      }

  %$node = ();
} # @node
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #50)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #52)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #54)"
}
}
sub _import_tree ($$) {
my ($self, $node) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #93)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #91)"
unless 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #55)"
($node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #56)"
'tid'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #57)"
} eq
        $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #58)"
'tid'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #59)"
}) {
  my @node = ($node);
  NODES: while (@node) {
    my $node = shift @node;
    next NODES unless UNIVERSAL::isa ($node,
                 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #60)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #61)"
);
      my @n;
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #62)"
'subnode2'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #63)"
}}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #64)"
'subnode'
#line 17 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #65)"
}}) {
        if (ref $p eq 'ARRAY') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #66)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 20 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #67)"
)
                            and $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #68)"
'tid'
#line 21 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #69)"
} ne
                            $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #70)"
'tid'
#line 22 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #71)"
}} @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #72)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 25 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #73)"
)
                            and $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #74)"
'tid'
#line 26 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #75)"
} ne
                            $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #76)"
'tid'
#line 27 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #77)"
}}
                      values %$p;
        }
      }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #78)"
'origin'
#line 31 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #79)"
}},
           @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #80)"
'subnode0'
#line 32 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #81)"
}}) {
      push @node, $node->{$p}
        if defined $node->{$p} and
           $node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #82)"
'tid'
#line 35 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #83)"
} ne
           $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #84)"
'tid'
#line 36 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #85)"
};
    }
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #86)"
'tid'
#line 38 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #87)"
} = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #88)"
'tid'
#line 38 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #89)"
};
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #90)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #92)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #94)"
}
}
sub _is_externally_referred ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #123)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #121)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #95)"
($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #96)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #97)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #98)"
1
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #99)"
;
} else {
  my @node = ($self);
  my %checked;
  NODES: while (@node) {
    my $node = shift @node;
    next NODES unless UNIVERSAL::isa ($node,
                 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #100)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #101)"
);
    if ($node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #102)"
'rc'
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #103)"
}) {
      $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #104)"
1
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #105)"
;
      last NODES;
    } elsif ($checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #106)"
'nid'
#line 13 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #107)"
}}) {
      next NODES;
    }
    my @n;
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #108)"
'subnode2'
#line 17 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #109)"
}}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #110)"
'subnode'
#line 25 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #111)"
}}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #112)"
'origin'
#line 32 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #113)"
}}) {
      unshift @node, $node->{$p} if $node->{$p};
      ## NOTE: Puts the top of the list,
      ##       since upper-level nodes are expected to be referred
      ##       more than lower-levels.
    }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #114)"
'subnode0'
#line 38 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #115)"
}}) {
      push @node, $node->{$p} if $node->{$p};
    }
    $checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #116)"
'nid'
#line 41 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #117)"
}} = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #118)"
1
#line 41 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #119)"
;
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #120)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #122)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #124)"
}
$r}
sub _is_same_node ($$) {
my ($self, $node) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #137)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #135)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #125)"
(ref $node and
    UNIVERSAL::isa ($node,
                    
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #126)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #127)"
) and
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #128)"
'nid'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #129)"
} eq $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #130)"
'nid'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #131)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #132)"
1
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #133)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #134)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #136)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #138)"
}
$r}
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #167)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #165)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #139)"
$r = bless {
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #140)"
'origin'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #141)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #142)"
'subnode0'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #143)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #144)"
'subnode'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #145)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #146)"
'subnode2'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #147)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #148)"
'irefnode'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #149)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #150)"
'anydata'
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #151)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #152)"
'anydata2'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #153)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #154)"
'rc'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #155)"
 => 0,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #156)"
'tid'
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #157)"
 => 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #158)"
(
  sprintf 'tag:suika.fam.cx,2005-09:%x:%x%s',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #159)"
,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #160)"
'nid'
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #161)"
 => 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #162)"
(
  sprintf 'tag:suika.fam.cx,2005-09:%x:%x%s',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #163)"
,
}, ref $self || $self;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #164)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #166)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #168)"
}
$r}
sub _new_reference ($$) {
my ($self, $class) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #179)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #177)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #169)"
$r = bless {
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #170)"
'node'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #171)"
 => $self,
}, ref $class ? ref $class : defined $class ? $class :
   
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #172)"
'Message::Util::ManakaiNode::ManakaiDOMNodeReference'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #173)"
;
$self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #174)"
'rc'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #175)"
}++;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #176)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #178)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #180)"
}
$r}
sub _orphanate ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #193)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #191)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #181)"
($self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #182)"
_is_externally_referred
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #183)"
) {
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #184)"
_change_tree_id
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #185)"

               (
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #186)"
(
  sprintf 'tag:suika.fam.cx,2005-09:%x:%x%s',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #187)"
);
} else {
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #188)"
_destroy
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #189)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #190)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #192)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #194)"
}
}
use overload bool => sub () {1}, 'eq', '_is_same_node', fallback => 1;
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiDOMNodeObject>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiDOMNodeObject>} = 0;
package Message::Util::ManakaiNode::ManakaiNodeStem;
our $VERSION = 20051009.1336;
push our @ISA, 'Message::Util::IF::NodeStem';
sub _change_tree_id ($$$) {
my ($self, $treeID, $groveRC) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #239)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #237)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #195)"
$tid = ref $treeID ? $treeID : \$treeID;
my $oldtid = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #196)"
'tid'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #197)"
};
my @xrnode;
my @node = ($self);
NODES: while (@node) {
  my $node = shift @node;
  next NODES unless ref $node;
  next NODES if ${$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #198)"
'tid'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #199)"
}} eq $$tid;
    my @n;
    my $nt = $Message::Util::ManakaiNode::ManakaiNodeRef::Prop{
      $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #200)"
't'
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #201)"
}
    }; 
    for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #202)"
's2'
#line 13 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #203)"
}||[]}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #204)"
's'
#line 21 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #205)"
}||[]}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
  for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #206)"
'o'
#line 28 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #207)"
}||[]},
               @{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #208)"
's0'
#line 29 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #209)"
}||[]}) {
    push @node, $node->{$p};
  }

  for (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #210)"
'x'
#line 33 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #211)"
}||[]}) {
    push @xrnode, $node->{$_} if defined $node->{$_};
  }

  ${$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #212)"
'grc'
#line 37 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #213)"
}} -= $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #214)"
'rc'
#line 37 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #215)"
};
  $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #216)"
'tid'
#line 38 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #217)"
} = $tid;
  $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #218)"
'grc'
#line 39 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #219)"
} = $groveRC;
  ${$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #220)"
'grc'
#line 40 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #221)"
}} += $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #222)"
'rc'
#line 40 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #223)"
};
}

for my $n (@xrnode) {
  if (${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #224)"
'tid'
#line 44 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #225)"
}} eq $$oldtid) {
    $n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #226)"
'rc'
#line 45 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #227)"
}++;
    ${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #228)"
'grc'
#line 46 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #229)"
}}++;
  } elsif (${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #230)"
'tid'
#line 47 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #231)"
}} eq $$tid) {
    $n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #232)"
'rc'
#line 48 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #233)"
}--;
    ${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #234)"
'grc'
#line 49 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #235)"
}}--;
    ## Is it necessary to test whether rc is 0 or not
    ## and if so call "destroy" method?  Maybe it need not
    ## (or should not, rather).
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #236)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #238)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #240)"
}
}
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #273)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #271)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #241)"
@node = ($self);
my $tid = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #242)"
'tid'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #243)"
};
my %xrnode;
NODES: while (@node) {
  my $node = shift @node;
  next NODES unless ref $node and defined $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #244)"
'nid'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #245)"
};
  my @n;
      my $nt = $Message::Util::ManakaiNode::ManakaiNodeRef::Prop{
        $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #246)"
't'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #247)"
}
      }; 
      for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #248)"
's2'
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #249)"
}||[]}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #250)"
's'
#line 19 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #251)"
}||[]}) {
        if (ref $p eq 'ARRAY') {
          push @node, @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, values %$p;
        }
      }
      for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #252)"
'o'
#line 26 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #253)"
}||[]},
             @{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #254)"
's0'
#line 27 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #255)"
}||[]}) {
        push @node, $node->{$p};
      }

  for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #256)"
'x'
#line 31 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #257)"
}||[]}) {
    if (defined $node->{$p} and 
        ${$node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #258)"
'tid'
#line 33 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #259)"
}||$tid} ne $$tid) {
      $node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #260)"
'rc'
#line 34 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #261)"
}--;
      ${$node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #262)"
'grc'
#line 35 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #263)"
}}--;
      $xrnode{${$node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #264)"
'tid'
#line 36 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #265)"
}}} = $node->{$p};
    }
  }

  %$node = ();
} # @node

CORE::delete $xrnode{$$tid};
for my $node (values %xrnode) {
  unless (
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #266)"
(${$node->{'grc'}} > 0)
#line 45 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #267)"
) {
    $node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #268)"
_destroy
#line 46 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #269)"
;
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #270)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #272)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #274)"
}
}
sub _import_tree ($$) {
my ($self, $node) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #323)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #321)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #275)"
@node = ($node);
my $newgrc = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #276)"
'grc'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #277)"
};
my $newtid = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #278)"
'tid'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #279)"
};
my $oldtid = $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #280)"
'tid'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #281)"
};
my @xrnode;
NODES: while (@node) {
  my $node = shift @node;
  next NODES unless ref $node;
  next NODES if ${$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #282)"
'tid'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #283)"
}} eq $$newtid;
  my @n;
    my $nt = $Message::Util::ManakaiNode::ManakaiNodeRef::Prop{
      $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #284)"
't'
#line 12 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #285)"
}
    }; 
    for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #286)"
's2'
#line 14 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #287)"
}||[]}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #288)"
's'
#line 22 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #289)"
}||[]}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
  for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #290)"
'o'
#line 29 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #291)"
}||[]},
           @{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #292)"
's0'
#line 30 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #293)"
}||[]}) {
    push @node, $node->{$p};
  }

  for (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #294)"
'x'
#line 34 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #295)"
}||[]}) {
    push @xrnode, $node->{$_} if defined $node->{$_};
  }

  ${$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #296)"
'grc'
#line 38 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #297)"
}} -= $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #298)"
'rc'
#line 38 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #299)"
};
  $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #300)"
'tid'
#line 39 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #301)"
} = $newtid;
  $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #302)"
'grc'
#line 40 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #303)"
} = $newgrc;
  ${$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #304)"
'grc'
#line 41 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #305)"
}} += $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #306)"
'rc'
#line 41 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #307)"
};
}

for my $n (@xrnode) {
  if (${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #308)"
'tid'
#line 45 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #309)"
}} eq $$oldtid) {
    $n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #310)"
'rc'
#line 46 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #311)"
}++;
    ${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #312)"
'grc'
#line 47 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #313)"
}}++;
  } elsif (${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #314)"
'tid'
#line 48 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #315)"
}} eq $$newtid) {
    $n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #316)"
'rc'
#line 49 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #317)"
}--;
    ${$n->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #318)"
'grc'
#line 50 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #319)"
}}--;
    ## Is it necessary to test whether rc is 0 or not
    ## and if so call "destroy" method?  Maybe it need not
    ## (or should not, rather).
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #320)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #322)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #324)"
}
}
sub _is_externally_referred ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #353)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #351)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #325)"
($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #326)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #327)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #328)"
1
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #329)"
;
} else {
  my @node = ($self);
  my %checked;
  NODES: while (@node) {
    my $node = shift @node;
    next NODES unless ref $node;
    if ($node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #330)"
'rc'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #331)"
}) {
      $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #332)"
1
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #333)"
;
      last NODES;
    } elsif ($checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #334)"
'nid'
#line 12 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #335)"
}}) {
      next NODES;
    }
    my @n;
    my $nt = $Message::Util::ManakaiNode::ManakaiNodeRef::Prop{
      $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #336)"
't'
#line 17 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #337)"
}
    }; 
    for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #338)"
's2'
#line 19 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #339)"
}}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #340)"
's'
#line 27 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #341)"
}}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
    for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #342)"
'o'
#line 34 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #343)"
}}) {
      unshift @node, $node->{$p} if $node->{$p};
      ## NOTE: Puts the top of the list,
      ##       since upper-level nodes are expected to be referred
      ##       more than lower-levels.
    }
    for my $p (@{$nt->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #344)"
's0'
#line 40 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #345)"
}}) {
      push @node, $node->{$p} if $node->{$p};
    }
    $checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #346)"
'nid'
#line 43 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #347)"
}} = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #348)"
1
#line 43 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #349)"
;
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #350)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #352)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #354)"
}
$r}
sub _is_same_node ($$) {
my ($self, $node) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #367)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #365)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #355)"
(ref $node and
    UNIVERSAL::isa ($node, 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #356)"
'Message::Util::ManakaiNode::ManakaiNodeStem'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #357)"
) and
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #358)"
'nid'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #359)"
} eq $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #360)"
'nid'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #361)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #362)"
1
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #363)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #364)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #366)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #368)"
}
$r}
sub _new ($$) {
my ($self, $className) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #387)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #385)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #369)"
$grc = 0;
$r = bless {
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #370)"
't'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #371)"
   => $className,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #372)"
'grc'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #373)"
 => \$grc,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #374)"
'rc'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #375)"
     => 0,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #376)"
'tid'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #377)"
 => \ (
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #378)"
(
  sprintf 'tag:suika.fam.cx,2005-09:%x:%x%s',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #379)"
),
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #380)"
'nid'
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #381)"
 => 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #382)"
(
  sprintf 'tag:suika.fam.cx,2005-09:%x:%x%s',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #383)"
,
}, ref $self || $self;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #384)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #386)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #388)"
}
$r}
sub _orphanate ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #401)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #399)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #389)"
($self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #390)"
_is_externally_referred
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #391)"
) {
  my $grc = 0;
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #392)"
_change_tree_id
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #393)"

               (\(
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #394)"
(
  sprintf 'tag:suika.fam.cx,2005-09:%x:%x%s',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #395)"
), \$grc);
} else {
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #396)"
_destroy
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #397)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #398)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #400)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #402)"
}
}
use overload bool => sub () {1}, 'eq', '_is_same_node', fallback => 1;
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiNodeStem>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiNodeStem>} = 0;
package Message::Util::IF::NodeStem;
our $VERSION = 20051009.1336;
package Message::Util::ManakaiNode::ManakaiDOMNodeReference;
our $VERSION = 20051009.1336;
push our @ISA, 'Message::Util::IF::NodeRef';
*DESTROY = \&_destroy;
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #419)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #417)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #403)"
$node = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #404)"
'node'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #405)"
};
if ($node) {
  CORE::delete $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #406)"
'node'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #407)"
};
  unless ($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #408)"
'w'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #409)"
}) {
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #410)"
'rc'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #411)"
}--;
    unless ($node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #412)"
_is_externally_referred
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #413)"
) {
      $node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #414)"
_destroy
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #415)"
;
    }
  }
} else {
  warn ref ($self) . q{->DESTROY: there is no associated }.
       q{node object - you have a global variable or }.
       qq{potential memory-leak detected\n};
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #416)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #418)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #420)"
}
}
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiDOMNodeReference>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiDOMNodeReference>} = 0;
package Message::Util::ManakaiNode::ManakaiNodeRef;
our $VERSION = 20051009.1336;
push our @ISA, 'Message::Util::IF::NodeRef';
*DESTROY = \&_destroy;
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #439)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #437)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #421)"
$node = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #422)"
'node'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #423)"
};
if ($node) {
  CORE::delete $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #424)"
'node'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #425)"
};
  unless ($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #426)"
'w'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #427)"
}) {
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #428)"
'rc'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #429)"
}--;
    ${$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #430)"
'grc'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #431)"
}}--;
    unless (
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #432)"
(${$node->{'grc'}} > 0)
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #433)"
) {
      $node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #434)"
_destroy
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #435)"
;
    }
  }
} else {
  warn ref ($self) . q{->DESTROY: there is no associated }.
       q{node object - you have a global variable or }.
       qq{potential memory-leak detected\n};
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #436)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #438)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #440)"
}
}
sub free ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #449)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #447)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #441)"
$self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #442)"
'node'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #443)"
}->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #444)"
_destroy
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class][@type=DISLang|Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #445)"
;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #446)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #448)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #450)"
}
}
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiNodeRef>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiNodeRef>} = 0;
$Message::Util::ManakaiNode::ManakaiNodeRef::Prop{q<Message::Util::ManakaiNode::ManakaiNodeRef>} = {};
package Message::Util::IF::NodeRef;
our $VERSION = 20051009.1336;
## License: <http://suika.fam.cx/~wakaba/archive/2004/8/18/license#Perl+MPL>
1;
