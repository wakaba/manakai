#!/usr/bin/perl 
## This file is automatically generated
## 	at 2005-09-24T11:10:52+00:00,
## 	from file "lib/Message/Util/ManakaiNode.dis",
## 	module <http://suika.fam.cx/~wakaba/archive/2005/manakai/Util/ManakaiNode>,
## 	for <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#Perl>.
## Don't edit by hand!
use strict;
package Message::Util::ManakaiNode;
our $VERSION = 20050924.1110;
package Message::Util::ManakaiNode::ManakaiDOMNodeObject;
our $VERSION = 20050924.1110;
push our @ISA, 'Message::Util::IF::NodeStem';
sub _import_tree ($$) {
my ($self, $node) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #39)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #37)"
unless 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #1)"
($node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #2)"
'tid'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #3)"
} eq
        $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #4)"
'tid'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #5)"
}) {
  my @node = ($node);
  NODES: while (defined (my $node = shift @node)) {
    next unless UNIVERSAL::isa ($node,
                
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #6)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #7)"
);
      my @n;
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #8)"
'subnode2'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #9)"
}}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #10)"
'subnode'
#line 16 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #11)"
}}) {
        if (ref $p eq 'ARRAY') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #12)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 19 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #13)"
)
                            and $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #14)"
'tid'
#line 20 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #15)"
} ne
                            $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #16)"
'tid'
#line 21 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #17)"
}} @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #18)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 24 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #19)"
)
                            and $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #20)"
'tid'
#line 25 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #21)"
} ne
                            $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #22)"
'tid'
#line 26 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #23)"
}}
                      values %$p;
        }
      }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #24)"
'origin'
#line 30 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #25)"
}},
           @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #26)"
'subnode0'
#line 31 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #27)"
}}) {
      push @node, $node->{$p}
        if defined $node->{$p} and
           $node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #28)"
'tid'
#line 34 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #29)"
} ne
           $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #30)"
'tid'
#line 35 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #31)"
};
    }
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #32)"
'tid'
#line 37 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #33)"
} = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #34)"
'tid'
#line 37 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #35)"
};
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #36)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #38)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #40)"
}
}
sub _orphanate ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #53)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #51)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #41)"
($self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #42)"
_is_externally_referred
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #43)"
) {
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #44)"
_change_tree_id
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #45)"

               (
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #46)"
(
  sprintf 'mid:%d.%d.%s.dom.manakai@suika.fam.cx#',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #47)"
);
} else {
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #48)"
_destroy
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #49)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #50)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #52)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #54)"
}
}
sub _is_externally_referred ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #83)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #81)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #55)"
($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #56)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #57)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #58)"
1
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #59)"
;
} else {
  my @node = ($self);
  my %checked;
  NODES: while (defined (my $node = shift @node)) {
    next unless UNIVERSAL::isa ($node,
                
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #60)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #61)"
);
    if ($node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #62)"
'rc'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #63)"
}) {
      $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #64)"
1
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #65)"
;
      last NODES;
    } elsif ($checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #66)"
'nid'
#line 12 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #67)"
}}) {
      next NODES;
    }
    my @n;
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #68)"
'subnode2'
#line 16 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #69)"
}}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #70)"
'subnode'
#line 24 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #71)"
}}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #72)"
'origin'
#line 31 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #73)"
}}) {
      unshift @node, $node->{$p} if $node->{$p};
      ## NOTE: Puts the top of the list,
      ##       since upper-level nodes are expected to be referred
      ##       more than lower-levels.
    }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #74)"
'subnode0'
#line 37 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #75)"
}}) {
      push @node, $node->{$p} if $node->{$p};
    }
    $checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #76)"
'nid'
#line 40 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #77)"
}} = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #78)"
1
#line 40 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #79)"
;
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #80)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #82)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #84)"
}
$r}
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #107)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #105)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #85)"
@node = ($self);
NODES: while (defined (my $node = shift @node)) {
      my @n;
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #86)"
'subnode2'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #87)"
}}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #88)"
'subnode'
#line 12 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #89)"
}}) {
        if (ref $p eq 'ARRAY') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #90)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 15 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #91)"
)
                            and defined $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #92)"
'nid'
#line 16 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #93)"
}} @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #94)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 19 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #95)"
)
                            and defined $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #96)"
'nid'
#line 20 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #97)"
}}
                       values %$p;
        }
      }
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #98)"
'origin'
#line 24 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #99)"
}},
             @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #100)"
'subnode0'
#line 25 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #101)"
}}) {
        push @node, $node->{$p}
          if defined $node->{$p} and
             defined $node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #102)"
'nid'
#line 28 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #103)"
};
      }
  %$node = ();
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #104)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #106)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #108)"
}
}
sub _change_tree_id ($$) {
my ($self, $treeID) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #137)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #135)"
unless 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #109)"
($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #110)"
'tid'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #111)"
} eq $treeID) {
  my @node = ($self);
  NODES: while (defined (my $node = shift @node)) {
    next unless UNIVERSAL::isa ($node,
                
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #112)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #113)"
);
      my @n;
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #114)"
'subnode2'
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #115)"
}}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #116)"
'subnode'
#line 15 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #117)"
}}) {
        if (ref $p eq 'ARRAY') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #118)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 18 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #119)"
)
                            and
                            $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #120)"
'tid'
#line 20 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #121)"
} ne $treeID} @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, grep {UNIVERSAL::isa ($_,
                            
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #122)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 23 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #123)"
)
                            and $_->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #124)"
'tid'
#line 24 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #125)"
} ne $treeID}
                      values %$p;
        }
      }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #126)"
'origin'
#line 28 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #127)"
}},
               @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #128)"
'subnode0'
#line 29 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #129)"
}}) {
      push @node, $node->{$p}
        if defined $node->{$p} and
           $node->{$p}->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #130)"
'tid'
#line 32 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #131)"
} ne $treeID;
    }
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #132)"
'tid'
#line 34 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #133)"
} = $treeID;
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #134)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #136)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #138)"
}
}
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #167)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #165)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #139)"
$r = bless {
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #140)"
'origin'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #141)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #142)"
'subnode0'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #143)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #144)"
'subnode'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #145)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #146)"
'subnode2'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #147)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #148)"
'irefnode'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #149)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #150)"
'anydata'
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #151)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #152)"
'anydata2'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #153)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #154)"
'rc'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #155)"
 => 0,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #156)"
'tid'
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #157)"
 => 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #158)"
(
  sprintf 'mid:%d.%d.%s.dom.manakai@suika.fam.cx#',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #159)"
,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #160)"
'nid'
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #161)"
 => 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #162)"
(
  sprintf 'mid:%d.%d.%s.dom.manakai@suika.fam.cx#',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #163)"
,
}, ref $self || $self;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #164)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #166)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #168)"
}
$r}
sub _is_same_node ($$) {
my ($self, $node) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #181)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #179)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #169)"
(ref $node and
    UNIVERSAL::isa ($node,
                    
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #170)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #171)"
) and
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #172)"
'nid'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #173)"
} eq $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #174)"
'nid'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #175)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #176)"
1
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #177)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #178)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #180)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #182)"
}
$r}
sub _new_reference ($$) {
my ($self, $class) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #193)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #191)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #183)"
$r = bless {
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #184)"
'node'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #185)"
 => $self,
}, ref $class ? ref $class : defined $class ? $class :
   
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #186)"
'Message::Util::ManakaiNode::ManakaiDOMNodeReference'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #187)"
;
$self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #188)"
'rc'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=newReference][@type=DISLang:Method]/Return[@Type=ManakaiDOM:ManakaiDOMNodeReference][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #189)"
}++;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #190)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #192)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #194)"
}
$r}
use overload bool => sub () {1}, 'eq', '_is_same_node', fallback => 1;
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiDOMNodeObject>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiDOMNodeObject>} = 0;
package Message::Util::ManakaiNode::ManakaiNodeStem;
our $VERSION = 20050924.1110;
push our @ISA, 'Message::Util::IF::NodeStem';
sub _import_tree ($$) {
my ($self, $node) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #215)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #213)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #195)"
@node = ($node);
NODES: while (defined (my $node = shift @node)) {
  next unless ref $node;
  next if $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #196)"
'tid'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #197)"
} eq
          $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #198)"
'tid'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #199)"
};
  my @n;
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #200)"
'subnode2'
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #201)"
}}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #202)"
'subnode'
#line 15 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #203)"
}}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
  for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #204)"
'origin'
#line 22 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #205)"
}},
           @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #206)"
'subnode0'
#line 23 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #207)"
}}) {
    push @node, $node->{$p};
  }
  $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #208)"
'tid'
#line 26 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #209)"
} = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #210)"
'tid'
#line 26 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=importTree][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #211)"
};
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #212)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #214)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #216)"
}
}
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #245)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #243)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #217)"
$r = bless {
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #218)"
'origin'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #219)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #220)"
'subnode0'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #221)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #222)"
'subnode'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #223)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #224)"
'subnode2'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #225)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #226)"
'irefnode'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #227)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #228)"
'anydata'
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #229)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #230)"
'anydata2'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #231)"
 => [],
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #232)"
'rc'
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #233)"
 => 0,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #234)"
'tid'
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #235)"
 => 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #236)"
(
  sprintf 'mid:%d.%d.%s.dom.manakai@suika.fam.cx#',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 10 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #237)"
,
  
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #238)"
'nid'
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #239)"
 => 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #240)"
(
  sprintf 'mid:%d.%d.%s.dom.manakai@suika.fam.cx#',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=new][@type=DISLang:Method]/Return[@Type=NodeStem][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #241)"
,
}, ref $self || $self;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #242)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #244)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #246)"
}
$r}
sub _orphanate ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #259)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #257)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #247)"
($self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #248)"
_is_externally_referred
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #249)"
) {
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #250)"
_change_tree_id
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #251)"

               (
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #252)"
(
  sprintf 'mid:%d.%d.%s.dom.manakai@suika.fam.cx#',
          time, $$,
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62] .
          ['A'..'Z', 'a'..'z', '0'..'9']->[rand 62]
)
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #253)"
);
} else {
  $self->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #254)"
_destroy
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=orphanate][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #255)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #256)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #258)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #260)"
}
}
sub _is_externally_referred ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #285)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #283)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #261)"
($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #262)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #263)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #264)"
1
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #265)"
;
} else {
  my @node = ($self);
  my %checked;
  NODES: while (defined (my $node = shift @node)) {
    next unless ref $node;
    if ($node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #266)"
'rc'
#line 8 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #267)"
}) {
      $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #268)"
1
#line 9 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #269)"
;
      last NODES;
    } elsif ($checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #270)"
'nid'
#line 11 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #271)"
}}) {
      next NODES;
    }
    my @n;
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #272)"
'subnode2'
#line 15 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #273)"
}}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #274)"
'subnode'
#line 23 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #275)"
}}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #276)"
'origin'
#line 30 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #277)"
}}) {
      unshift @node, $node->{$p} if $node->{$p};
      ## NOTE: Puts the top of the list,
      ##       since upper-level nodes are expected to be referred
      ##       more than lower-levels.
    }
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #278)"
'subnode0'
#line 36 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #279)"
}}) {
      push @node, $node->{$p} if $node->{$p};
    }
    $checked{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #280)"
'nid'
#line 39 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isExternallyReferred][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #281)"
}} = 1;
  }
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #282)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #284)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #286)"
}
$r}
sub _is_same_node ($$) {
my ($self, $node) = @_;
my $r;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #299)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #297)"
if 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #287)"
(ref $node and
    UNIVERSAL::isa ($node, 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #288)"
'Message::Util::IF::NodeStem'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #289)"
) and
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #290)"
'nid'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #291)"
} eq $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #292)"
'nid'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #293)"
}) {
  $r = 
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #294)"
1
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=isSameNode][@type=DISLang:Method]/Return[@Type=DISPerl:Boolean::ManakaiDOM:all][@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #295)"
;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #296)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #298)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #300)"
}
$r}
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #315)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #313)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #301)"
@node = ($self);
NODES: while (defined (my $node = shift @node)) {
  next unless ref $node and defined $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #302)"
'nid'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #303)"
};
  my @n;
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #304)"
'subnode2'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #305)"
}}) {
        if (ref $node->{$p} eq 'ARRAY') {
          push @n, @{$node->{$p}};
        } elsif (ref $node->{$p} eq 'HASH') {
          push @n, values %{$node->{$p}};
        }
      }
      for my $p (@n,
                 map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #306)"
'subnode'
#line 13 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #307)"
}}) {
        if (ref $p eq 'ARRAY') {
          push @node, @$p;
        } elsif (ref $p eq 'HASH') {
          push @node, values %$p;
        }
      }
      for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #308)"
'origin'
#line 20 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #309)"
}},
             @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #310)"
'subnode0'
#line 21 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #311)"
}}) {
        push @node, $node->{$p};
      }
  %$node = ();
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #312)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #314)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #316)"
}
}
sub _change_tree_id ($$) {
my ($self, $treeID) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #333)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #331)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #317)"
@node = ($self);
NODES: while (defined (my $node = shift @node)) {
  next unless ref $node;
  next if $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #318)"
'tid'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #319)"
} eq $treeID;
    my @n;
    for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #320)"
'subnode2'
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #321)"
}}) {
      if (ref $node->{$p} eq 'ARRAY') {
        push @n, @{$node->{$p}};
      } elsif (ref $node->{$p} eq 'HASH') {
        push @n, values %{$node->{$p}};
      }
    }
    for my $p (@n,
               map {$node->{$_}} @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #322)"
'subnode'
#line 14 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #323)"
}}) {
      if (ref $p eq 'ARRAY') {
        push @node, @$p;
      } elsif (ref $p eq 'HASH') {
        push @node, values %$p;
      }
    }
  for my $p (@{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #324)"
'origin'
#line 21 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #325)"
}},
               @{$node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #326)"
'subnode0'
#line 22 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #327)"
}}) {
    push @node, $node->{$p};
  }
  $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #328)"
'tid'
#line 25 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiDOM:ManakaiDOMNodeObject][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=changeTreeID][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #329)"
} = $treeID;
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #330)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #332)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #334)"
}
}
use overload bool => sub () {1}, 'eq', '_is_same_node', fallback => 1;
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiNodeStem>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiNodeStem>} = 0;
package Message::Util::ManakaiNode::ManakaiDOMNodeReference;
our $VERSION = 20050924.1110;
push our @ISA, 'Message::Util::IF::NodeRef';
*DESTROY = \&_destroy;
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #351)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #349)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #335)"
$node = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #336)"
'node'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #337)"
};
if ($node) {
  CORE::delete $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #338)"
'node'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #339)"
};
  unless ($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #340)"
'w'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #341)"
}) {
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #342)"
'rc'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #343)"
}--;
    unless ($node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #344)"
_is_externally_referred
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #345)"
) {
      $node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #346)"
_destroy
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #347)"
;
    }
  }
} else {
  warn ref ($self) . q{->DESTROY: there is no associated }.
       q{node object - you have a global variable or }.
       qq{potential memory-leak detected\n};
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #348)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #350)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #352)"
}
}
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiDOMNodeReference>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiDOMNodeReference>} = 0;
package Message::Util::ManakaiNode::ManakaiNodeRef;
our $VERSION = 20050924.1110;
push our @ISA, 'Message::Util::IF::NodeRef';
sub free ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #361)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #359)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #353)"
$self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #354)"
'node'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #355)"
}->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #356)"
_destroy
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/ResourceDef[@Name=free][@type=DISLang|Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #357)"
;
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #358)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #360)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #362)"
}
}
*DESTROY = \&_destroy;
sub _destroy ($) {
my ($self) = @_;

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [b] (Chunk #379)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [bc] (Chunk #377)"
my 
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #363)"
$node = $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #364)"
'node'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #365)"
};
if ($node) {
  CORE::delete $self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #366)"
'node'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #367)"
};
  unless ($self->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #368)"
'w'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #369)"
}) {
    $node->{
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #370)"
'rc'
#line 5 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #371)"
}--;
    unless ($node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #372)"
_is_externally_referred
#line 6 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #373)"
) {
      $node->
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #374)"
_destroy
#line 7 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeRef][@QName=ManakaiDOM:ManakaiDOMNodeReference][@QName=ManakaiNodeRef][@type=dis:MultipleResource][@type=ManakaiDOM:IF][@type=ManakaiDOM:Class][@type=ManakaiDOM:Class]/IntMethod[@Name=destroy][@type=DISLang:Method]/Return[@type=DISLang:MethodReturn]/PerlDef [u] (Chunk #375)"
;
    }
  }
} else {
  warn ref ($self) . q{->DESTROY: there is no associated }.
       q{node object - you have a global variable or }.
       qq{potential memory-leak detected\n};
}
#line 1 "lib/Message/Util/ManakaiNode.dis [/u] (Chunk #376)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/bc] (Chunk #378)"

#line 1 "lib/Message/Util/ManakaiNode.dis [/b] (Chunk #380)"
}
}
$Message::DOM::ClassFeature{q<Message::Util::ManakaiNode::ManakaiNodeRef>} = {};
$Message::DOM::ClassPoint{q<Message::Util::ManakaiNode::ManakaiNodeRef>} = 0;
for ($Message::Util::IF::NodeRef::, $Message::Util::IF::NodeStem::){}
## License: <http://suika.fam.cx/~wakaba/archive/2004/8/18/license#Perl+MPL>
1;
