#!/usr/bin/perl 
## This file is automatically generated
## 	at 2005-05-11T13:03:22+00:00,
## 	from file "lib/Message/DOM/DOMMetaImpl.dis",
## 	module <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#ManakaiDOM.DOMMetaImpl>,
## 	for <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#ManakaiDOMLatest>.
## Don't edit by hand!
use strict;
require Message::Util::Error::DOMException;
require Message::Util::ManakaiNode;
package Message::DOM::DOMMetaImpl;
our $VERSION = 20050511.1303;
package Message::DOM::DOMMetaImpl::ManakaiDOMObject;
our $VERSION = 20050511.1303;
sub ___report_error ($$) {
my ($self, $err) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOM:ManakaiDOMObject][@type=ManakaiDOM:Class]/IntMethod[@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #7)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOM:ManakaiDOMObject][@type=ManakaiDOM:Class]/IntMethod[@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #5)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOM:ManakaiDOMObject][@type=ManakaiDOM:Class]/IntMethod[@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #1)"
($err->isa (
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #2)"
'Message::Util::Error::DOMException::ManakaiDOMException'
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOM:ManakaiDOMObject][@type=ManakaiDOM:Class]/IntMethod[@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #3)"
)) {
  $err->throw;
} else {
## TODO: Implement warning reporting
  warn $err->stringify;
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #4)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #6)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #8)"
}
}
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMObject>} = {};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMObject>} = 0;
$Message::DOM::DOMImplementationRegistry = 'Message::DOM::DOMMetaImpl::ManakaiDOMImplementationRegistry';
package Message::DOM::DOMMetaImpl::ManakaiDOMImplementationRegistryCompat;
our $VERSION = 20050511.1303;
push our @ISA, 'Message::DOM::DOMMetaImpl::ManakaiDOMObject';
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #13)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #11)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #9)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #10)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #12)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #14)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #41)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #15)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #16)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #21)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #19)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #17)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #18)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #20)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #22)"
}

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #25)"

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #23)"
;

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #24)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #26)"

{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [b] (Chunk #35)"
local $Error::Depth = $Error::Depth + 1;

{
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #33)"

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #31)"

  for 
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #27)"
(ref $self ? @$self
                 : @org::w3c::dom::DOMImplementationSourceList) {
    $r = $_->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #28)"
get_dom_implementation
#line 5 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #29)"

                           ($features);
    last if defined $r;
  }

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #30)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #32)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #34)"
}

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #36)"
}

#line 10 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #39)"

#line 10 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #37)"
;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #38)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #40)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #42)"
}
$r}
sub add_source ($$) {
my ($self, $s) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=addSource][@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #47)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=addSource][@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #45)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=addSource][@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #43)"
$reg = ref $self ? $self
                    : \@org::w3c::dom::DOMImplementationSourceList;
PUSH: {
  ## Checks if $s is already in list
  for (@$reg) {
    last PUSH if overload::StrVal ($_) eq overload::StrVal ($s) or
                 $_ eq $s;
  }
  push @$reg, $s;
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #44)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #46)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #48)"
}
}
sub new_instance ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=newInstance][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #53)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=newInstance][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #51)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=newInstance][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #49)"
$r = bless [@org::w3c::dom::DOMImplementationSourceList], $self;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #50)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #52)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #54)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #59)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #57)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #55)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #56)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #58)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #60)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #91)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #61)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #62)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #67)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #65)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #63)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #64)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #66)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #68)"
}

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #71)"

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #69)"
;

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #70)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #72)"

{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [b] (Chunk #85)"
local $Error::Depth = $Error::Depth + 1;

{
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #83)"

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #81)"

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #73)"

  $r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #74)"
Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList->_new
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #75)"
;
  for (ref $self ? @$self
                 : @org::w3c::dom::DOMImplementationSourceList) {
    $r->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #76)"
_add
#line 7 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #77)"

              ($_->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #78)"
get_dom_implementation_list
#line 8 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #79)"
 ($features));
  }

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #80)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #82)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #84)"
}

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #86)"
}

#line 11 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #89)"

#line 11 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #87)"
;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #88)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #90)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #92)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationRegistryCompat>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#dommain', {'2.0', '1', '3.0', '1', '1.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationRegistryCompat>} = 6;
package Message::DOM::DOMMetaImpl::ManakaiDOMImplementationRegistry;
our $VERSION = 20050511.1303;
push our @ISA, 'Message::DOM::DOMMetaImpl::ManakaiDOMObject';
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #97)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #95)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #93)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #94)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #96)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #98)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #125)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #99)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #100)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #105)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #103)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #101)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #102)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #104)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #106)"
}

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #109)"

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #107)"
;

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #108)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #110)"

{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [b] (Chunk #119)"
local $Error::Depth = $Error::Depth + 1;

{
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #117)"

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #115)"

  for 
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #111)"
my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    $r = $class->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #112)"
get_dom_implementation
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #113)"
 ($features);
    last if defined $r;
  }

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #114)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #116)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #118)"
}

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #120)"
}

#line 11 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #123)"

#line 11 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #121)"
;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #122)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #124)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #126)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #131)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #129)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #127)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #128)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #130)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #132)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #163)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #133)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #134)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #139)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #137)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #135)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #136)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #138)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #140)"
}

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #143)"

#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #141)"
;

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #142)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #144)"

{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [b] (Chunk #157)"
local $Error::Depth = $Error::Depth + 1;

{
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #155)"

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #153)"

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #145)"

  $r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #146)"
Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList->_new
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #147)"
;
  for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    $r->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #148)"
_add
#line 8 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #149)"

              ($class->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #150)"
get_dom_implementation_list
#line 9 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #151)"
 ($features));
  }

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #152)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #154)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #156)"
}

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #158)"
}

#line 12 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #161)"

#line 12 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMMain:ManakaiDOMImplementationRegistry][@type=ManakaiDOM:Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #159)"
;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #160)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #162)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #164)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationRegistry>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#dommain', {'2.0', '1', '3.0', '1', '1.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationRegistry>} = 6;
package Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList;
our $VERSION = 20050511.1303;
push our @ISA, 'Message::DOM::DOMMetaImpl::ManakaiDOMObject', 'Message::DOM::IF::DOMImplementationList', 'Message::DOM::IFLatest::DOMImplementationList', 'Message::DOM::IFLevel3::DOMImplementationList';
sub length ($;$) {
if (@_ == 1) {
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [bc] (Chunk #171)"
my ($self) = @_;
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/Attr[@Name=length][@type=ManakaiDOM:DOMAttribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=ManakaiDOM:DOMAttrGet]/PerlDef [b] (Chunk #169)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/Attr[@Name=length][@type=ManakaiDOM:DOMAttribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=ManakaiDOM:DOMAttrGet]/PerlDef [bc] (Chunk #167)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/Attr[@Name=length][@type=ManakaiDOM:DOMAttribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=ManakaiDOM:DOMAttrGet]/PerlDef [u] (Chunk #165)"
$r = @$self;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #166)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #168)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #170)"
}
$r;

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #172)"
} else {
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [bc] (Chunk #173)"
my ($self) = @_;
report Message::Util::Error::DOMException::CoreException -object => $self, '-type' => 'NO_MODIFICATION_ALLOWED_ERR', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#on' => 'get', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#subtype' => 'http://suika.fam.cx/~wakaba/archive/2005/manakai/Util/Error/DOMException#READ_ONLY_ATTRIBUTE_ERR', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#class' => 'Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#attr' => 'length';

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #174)"
}}
sub _add ($@) {
my ($self, @list) = @_;
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #205)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #181)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #175)"
$r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #176)"
1
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #177)"
;
for (@list) {
  if (UNIVERSAL::isa ($_, 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #178)"
'Message::DOM::IFLatest::DOMImplementationList'
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #179)"
)) {
    
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #180)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #182)"

{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [b] (Chunk #193)"
local $Error::Depth = $Error::Depth + 1;

{
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #191)"

#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #189)"

      my 
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #183)"
$len = $_->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #184)"
length
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #185)"
; 
      for (my $i = 0; $i < $len; $i++) {
        push @$self, $_->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #186)"
item
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #187)"
 ($i);
      }
    
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #188)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #190)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #192)"
}

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #194)"
}

#line 9 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #203)"

#line 9 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #195)"
;
  } elsif (UNIVERSAL::isa ($_,
                           
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #196)"
'Message::DOM::IF::DOMImplementation'
#line 11 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #197)"
) and
           UNIVERSAL::isa ($_,
                           
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #198)"
'Message::Util::ManakaiNode::ManakaiDOMNodeObject'
#line 13 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #199)"
)) {
    push @$self, $_;
  } else {
    $r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #200)"
0
#line 16 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=add][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #201)"
;
    last;
  }
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #202)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #204)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #206)"
}
$r}
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:ManakaiDOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #211)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:ManakaiDOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #209)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:ManakaiDOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #207)"
$r = bless [], ref $self ? ref $self : $self;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #208)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #210)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #212)"
}
$r}
sub item ($$) {
my ($self, $index) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #219)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #217)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #213)"
(not defined $index or
    $index < 0 or
    $index > $#$self) {
  $r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #214)"
undef
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationList][@type=dis:MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #215)"
;
} else {
  $r = $self->[$index];
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #216)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #218)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #220)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList>} = {'core', {'3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList>} = 3;
package Message::DOM::DOMMetaImpl::ManakaiDOMImplementationSourceCompat;
our $VERSION = 20050511.1303;
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #225)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #223)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #221)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #222)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #224)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #226)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #233)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #231)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #227)"
$features->{'core'}->{''} = 1;
    ## NOTE: This method must return a DOMImplementation object. 
CLS: for my $fcls (values %
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #228)"
Message::DOM::IF::DOMImplementation::Class
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #229)"
) {
  for my $fname (keys %$features) {
    my $fkey = $fname;
    my $plus = $fname =~ s/^\+// ? 1 : 0;
    F: for my $fver (grep {$features->{$fkey}->{$_}}
                           keys %{$features->{$fkey}}) {
      unless ($fcls->{feature}->{$fname}->{$fver}) {
        ## Accessible via getFeature
        if ($plus and
            $Message::DOM::DOMCore::ManakaiDOMImplementation::Class{
              $fcls->{packageName}}->{packageName}) {
          for my $pfcls (values
             %Message::DOM::DOMCore::ManakaiDOMImplementation::Class) {
            if ($pfcls->{feature}->{$fname}->{$fver}) {
              next F;
            }
          }
        }
        next CLS;
      }
    }
  }
  $r = $fcls->{packageName}->_new;
  last CLS;
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #230)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #232)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #234)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #239)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #237)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #235)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #236)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #238)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #240)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #249)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #247)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #241)"
$features->{'core'}->{''} = 1;
    ## NOTE: This method must return DOMImplementation objects. 
$r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #242)"
Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList->_new
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #243)"
;
CLS: for (values %Message::DOM::DOMCore::DOMImplementation::Class) {
  for my $fname (keys %$features) {
    my $plus = $fname =~ s/^\+// ? 1 : 0;
    F: for my $fver (ref $features->{$fname} eq 'HASH'
                       ? grep {$features->{$fname}->{$_}}
                           keys %{$features->{$fname}}
                       : $features->{$fname}) {
      unless ($_->{feature}->{$fname}->{$fver}) {
        ## Accessible via getFeature
        if ($plus and
            $Message::DOM::DOMCore::ManakaiDOMImplementation::Class{
              $_->{packageName}}->{packageName}) {
          for (values
             %Message::DOM::DOMCore::ManakaiDOMImplementation::Class) {
            if ($_->{feature}->{$fname}->{$fver}) {
              next F;
            }
          }
        }
        next CLS;
      }
    }
  }
  $r->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #244)"
_add
#line 27 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #245)"

        ($_->{packageName}->_new);
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #246)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #248)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #250)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationSourceCompat>} = {'core', {'3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationSourceCompat>} = 3;
package Message::DOM::DOMMetaImpl::ManakaiDOMImplementationSource;
our $VERSION = 20050511.1303;
push our @ISA, 'Message::DOM::IF::DOMImplementationSource', 'Message::DOM::IFLatest::DOMImplementationSource', 'Message::DOM::IFLevel3::DOMImplementationSource';
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{


#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #253)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #251)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #252)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #254)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #256)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #291)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #259)"
CLS: 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #257)"


for my $class (grep {
  $Message::DOM::ManakaiDOMImplementationSource::SourceClass{$_}
} keys %Message::DOM::ManakaiDOMImplementationSource::SourceClass) {
  print STDERR "Class $class:\n";
  
{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #267)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #265)"
unless 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #261)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #262)"
1
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #263)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
}

;

for my $fname (keys %$features) {
  my $fkey = $fname;
  my $plus = $fname =~ s/^\+// ? 
    1 : 
        0
          ;

  print STDERR "  Feature $fkey ($plus)\n";

 FVER: for my $fver (grep {$features->{$fkey}->{$_}}
                     keys %{$features->{$fkey}}) {

    print STDERR "    Version $fver\n" ;

    for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
      print STDERR "      clsss $cls..\n",
        join "\t", %{$Message::DOM::ImplFeature{$cls}||{}}, "\n" if $fname eq 'core';
      if ($Message::DOM::ImplFeature{$class}->{$fname}->{$fver} ||=
          ## (Caching)
          $Message::DOM::ImplFeature{$cls}->{$fname}->{$fver}) {
        print STDERR "      found in $cls\n";
        next FVER; # Feature/version found
      }
    }
    
    if ($plus) {
      
      if ($Message::DOM::ManakaiDOMImplementation::CompatClass{
              $class}) {
          my %compat_cls;
          for my $cls (grep {
            $Message::DOM::ManakaiDOMImplementation::CompatClass{
            $_}
          } keys
          %Message::DOM::ManakaiDOMImplementation::CompatClass) {
            next if $compat_cls{$cls};
{
unless 
($Message::DOM::ClassISA{$cls}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($cls);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #278)"
1
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #279)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$cls} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #280)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #282)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #284)"
}

#line 28 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementation::ManakaiDOM:ManakaiDOM][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #289)"


;

            for my $c (@{$Message::DOM::ClassISA{$cls}}) {
              $compat_cls{$c} = 
1
;
            }                 
          }
          for my $cls (keys %compat_cls) {
            if ($Message::DOM::ImplFeature{$cls}
                  ->{$fname}->{$fver}) {
              next FVER; # +Feature/ver found
            }
          }
        }
      }
    print STDERR "    ver Not found\n";
      next CLS; # Not found
    } # FVER
  } # FNAME

  ## Class found
  $r = $class->_new;
  last CLS;    ## NOTE: Method name directly written
} # CLS
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #288)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #290)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #292)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #297)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #295)"
if 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatures][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #293)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #294)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #296)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #298)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #337)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #303)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #299)"
$r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #300)"
Message::DOM::DOMMetaImpl::ManakaiDOMImplementationList->_new
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #301)"
;
CLS: for my $class (grep {
  $Message::DOM::ManakaiDOMImplementationSource::SourceClass{$_}
} keys %Message::DOM::ManakaiDOMImplementationSource::SourceClass) {
  
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #302)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #304)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #311)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #309)"
unless 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #305)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #306)"
1
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #307)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #308)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #310)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #312)"
}

#line 5 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #319)"

#line 5 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #313)"
;
  for my $fname (keys %$features) {
    my $fkey = $fname;
    my $plus = $fname =~ s/^\+// ? 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #314)"
1 : 
#line 8 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #315)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #316)"
0
#line 8 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #317)"
;
    FVER: for my $fver (grep {$features->{$fkey}->{$_}}
                           keys %{$features->{$fkey}}) {
      for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
        if ($Message::DOM::ImplFeature{$class}->{$fname}->{$fver} ||=
               ## (Caching)
            $Message::DOM::ImplFeature{$cls}->{$fname}->{$fver}) {
          next FVER; # Feature/version found
        }
      }

      if ($plus) {
        if ($Message::DOM::ManakaiDOMImplementation::CompatClass{
              $class}) {
          my %compat_cls;
          for my $cls (grep {
            $Message::DOM::ManakaiDOMImplementation::CompatClass{
            $_}
          } keys
          %Message::DOM::ManakaiDOMImplementation::CompatClass) {
            next if $compat_cls{$cls};
            
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #318)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #320)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #327)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #325)"
unless 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #321)"
($Message::DOM::ClassISA{$cls}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($cls);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #322)"
1
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #323)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$cls} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #324)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #326)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #328)"
}

#line 29 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #335)"

#line 29 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #329)"
;
            for my $c (@{$Message::DOM::ClassISA{$cls}}) {
              $compat_cls{$c} = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #330)"
1
#line 31 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #331)"
;
            }                 
          }
          for my $cls (keys %compat_cls) {
            if ($Message::DOM::ImplFeature{$cls}
                  ->{$fname}->{$fver}) {
              next FVER; # +Feature/ver found
            }
          }
        }
      }
      next CLS; # Not found
    } # FVER
  } # FNAME

  ## Class found
  $r->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #332)"
_add
#line 47 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=DOMCore:DOMImplementationSource][@type=dis:MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMCore:DOMImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #333)"
 ($class->_new);
  last CLS;                 ## NOTE: Method name directly written
} # CLS
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #334)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #336)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #338)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationSource>} = {'core', {'3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationSource>} = 3;
$Message::DOM::ManakaiDOMImplementationRegistry::SourceClass{q<Message::DOM::DOMMetaImpl::ManakaiDOMImplementationSource>} = 1;
package Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementationCompat;
our $VERSION = 20050511.1303;
push our @ISA, 'Message::Util::ManakaiNode::ManakaiDOMNodeReference', 'Message::DOM::DOMMetaImpl::ManakaiDOMObject';
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #351)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #349)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #339)"
$node = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #340)"
Message::Util::ManakaiNode::ManakaiDOMNodeObject->_new
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #341)"
;
$r = $node->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #342)"
Message::Util::ManakaiNode::ManakaiDOMNodeObject::_new_reference
#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #343)"
 ($self);
$node->{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #344)"
'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#implID'
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #345)"
} = $node->{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #346)"
'nodeID'
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #347)"
};
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #348)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #350)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #352)"
}
$r}
sub get_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #357)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #355)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #353)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #354)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #356)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #358)"
}

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #363)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #361)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #359)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #360)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #362)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #364)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #373)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #371)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #365)"
$feature =~ s/^\+//;
for (values %Message::DOM::DOMCore::ManakaiDOMImplementation::Class) {
  if ($_->{feature}->{$feature}->{$version}) {
    $r = $self->{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #366)"
'node'
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #367)"
}
              ->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #368)"
Message::Util::ManakaiNode::ManakaiDOMNodeObject::_new_reference
#line 5 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #369)"

                                              ($_->{packageName});
    last;
  }
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #370)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #372)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #374)"
}
$r}
sub has_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #379)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #377)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #375)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #376)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #378)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #380)"
}

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #385)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #383)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #381)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #382)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #384)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #386)"
}
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #397)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #395)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #387)"
$plus = $feature =~ s/^\+// ? 1 : 0;
if ($
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #388)"
Message::DOM::IF::DOMImplementation::Class
#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #389)"
{
ref $self}->{$feature}->{$version}) {
$r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #390)"
1
#line 4 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #391)"
;
} else {
for (values %Message::DOM::DOMCore::ManakaiDOMImplementation::Class) {
if ($_->{feature}->{$feature}->{$version}) {
  $r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #392)"
1
#line 8 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #393)"
;
  last;
}
}
} 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #394)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #396)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #398)"
}
$r}
$Message::DOM::ImplFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementationCompat>}->{q<http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum>}->{q<3.0>} ||= 1;
$Message::DOM::ImplFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementationCompat>}->{q<http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum>}->{q<>} = 1;
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementationCompat>} = {'core', {'1.0', '1'}, 'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementationCompat>} = 4;
package Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementation;
our $VERSION = 20050511.1303;
push our @ISA, 'Message::Util::ManakaiNode::ManakaiDOMNodeReference', 'Message::DOM::DOMMetaImpl::ManakaiDOMObject', 'Message::DOM::IF::DOMImplementation', 'Message::DOM::IF::ManakaiDOMMinimumImplementationIF', 'Message::DOM::IFLatest::ManakaiDOMMinimumImplementationIF', 'Message::DOM::IFLevel1::DOMImplementation', 'Message::DOM::IFLevel3::ManakaiDOMMinimumImplementationIF';
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #411)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #409)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #399)"
$node = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #400)"
Message::Util::ManakaiNode::ManakaiDOMNodeObject->_new
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #401)"
;
$r = $node->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #402)"
Message::Util::ManakaiNode::ManakaiDOMNodeObject::_new_reference
#line 2 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #403)"
 ($self);
$node->{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #404)"
'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#implID'
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #405)"
} = $node->{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #406)"
'nodeID'
#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/IntMethod[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiDOMMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #407)"
};
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #408)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #410)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #412)"
}
$r}
sub get_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #417)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #415)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #413)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #414)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #416)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #418)"
}

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #423)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #421)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #419)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #420)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #422)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #424)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #445)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #427)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #425)"
$feature =~ s/^\+//;
CLASS: for my $class (grep {
  $Message::DOM::ManakaiDOMImplementation::CompatClass{$_}
} keys %Message::DOM::ManakaiDOMImplementation::CompatClass) {
  
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #426)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #428)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #435)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #433)"
unless 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #429)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #430)"
1
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #431)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #432)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #434)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #436)"
}

#line 5 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #443)"

#line 5 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #437)"
;
  for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
    if ($Message::DOM::ImplFeature{$class}->{$feature}->{$version}) {
      $r = $self->{
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #438)"
'node'
#line 8 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #439)"
}
                ->
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #440)"
Message::Util::ManakaiNode::ManakaiDOMNodeObject::_new_reference
#line 9 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:Object::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #441)"
 ($class);
      last CLASS;
    }
  }
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #442)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #444)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #446)"
}
$r}
sub has_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #451)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #449)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureName][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #447)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #448)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #450)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #452)"
}

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #457)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #455)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/StringDataTypeDef[@QName=ManakaiDOM:ManakaiDOMFeatureVersion][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #453)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #454)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #456)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #458)"
}
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #477)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #461)"
my 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #459)"
$plus = $feature =~ s/^\+// ? 1 : 0;
my $class = ref $self;

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #460)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #462)"

{
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #469)"

#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #467)"
unless 
#line 1 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #463)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #464)"
1
#line 6 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #465)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #466)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #468)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #470)"
}

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #475)"

#line 3 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #471)"
;
if (defined $Message::DOM::ImplFeature{$class}
                    ->{$feature}->{$version}) {
  $r = $Message::DOM::ImplFeature{$class}
                    ->{$feature}->{$version};
} elsif ($plus) {
  CLASS: for my $class (grep {
    $Message::DOM::ManakaiDOMImplementation::CompatClass{$_}
  } keys %Message::DOM::ManakaiDOMImplementation::CompatClass) {
    for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
      if ($Message::DOM::ImplFeature{$class}
                       ->{$feature}->{$version}) {
        $r = 
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #472)"
1
#line 15 "/document (lib/Message/DOM/DOMMetaImpl.dis)/ResourceDef[@QName=ManakaiDOMMinimumImplementationIF][@type=dis:MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #473)"
;
        last CLASS;
      }
    }
  }
}
#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/u] (Chunk #474)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/bc] (Chunk #476)"

#line 1 "lib/Message/DOM/DOMMetaImpl.dis [/b] (Chunk #478)"
}
$r}
$Message::DOM::ImplFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementation>}->{q<http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum>}->{q<3.0>} ||= 1;
$Message::DOM::ImplFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementation>}->{q<http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum>}->{q<>} = 1;
$Message::DOM::ClassFeature{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementation>} = {'core', {'1.0', '1'}, 'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementation>} = 4;
$Message::DOM::ManakaiDOMImplementationSource::SourceClass{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementation>} = 1;
$Message::DOM::ManakaiDOMImplementation::CompatClass{q<Message::DOM::DOMMetaImpl::ManakaiDOMMinimumImplementation>} = 1;
for ($Message::DOM::IFLevel3::DOMImplementationSource::, $Message::DOM::IF::ManakaiDOMMinimumImplementationIF::, $Message::DOM::IFLatest::ManakaiDOMMinimumImplementationIF::, $Message::DOM::IF::DOMImplementationSource::, $Message::DOM::IFLevel3::DOMImplementationList::, $Message::DOM::IFLatest::DOMImplementationSource::, $Message::DOM::IF::DOMImplementationList::, $Message::DOM::IFLevel1::DOMImplementation::, $Message::DOM::IFLevel3::ManakaiDOMMinimumImplementationIF::, $Message::DOM::IFLatest::DOMImplementationList::, $Message::DOM::IF::DOMImplementation::){}
## License: <http://suika.fam.cx/~wakaba/archive/2004/8/18/license#Perl+MPL>
1;
