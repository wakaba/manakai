#!/usr/bin/perl 
## This file is automatically generated
## 	at 2005-10-12T14:42:18+00:00,
## 	from file "lib/Message/DOM/DOMFeature.dis",
## 	module <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#ManakaiDOM.DOMFeature>,
## 	for <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#ManakaiDOMLatest>.
## Don't edit by hand!
use strict;
require Message::Util::ManakaiNode;
package Message::DOM::DOMFeature;
our $VERSION = 20051012.1442;
$Message::DOM::ImplementationRegistry = 'Message::DOM::DOMFeature::ImplementationRegistry';
package Message::DOM::DOMFeature::ImplementationRegistry;
our $VERSION = 20051012.1442;
push our @ISA, 'Message::DOM::IFLatest::ImplementationSource', 'Message::DOM::IFLevel3::ImplementationSource';
sub get_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #6)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #4)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #2)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #3)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #5)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #7)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #45)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #8)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #9)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #15)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #13)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #11)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #12)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #14)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #16)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #20)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #18)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #19)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #21)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #38)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #36)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #34)"

  C: 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #23)"
for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    if ($class->isa (
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #24)"
'Message::DOM::IFLatest::ImplementationSource'
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #26)"
)) {
      $r = $class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #27)"
get_implementation
#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #29)"
 ($features);
    } else {
      $r = $class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #30)"
get_dom_implementation
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #32)"
 ($features);
    }
    last C if defined $r;
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #33)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #35)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #37)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #39)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #43)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #41)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #42)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #44)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #46)"
}
$r}
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #52)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #50)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #48)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #49)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #51)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #53)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #91)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #60)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #55)"
$features->{core}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #56)"
1
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #58)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #59)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #61)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #67)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #65)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #63)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #64)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #66)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #68)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #72)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #70)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #71)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #73)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #84)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #82)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #80)"

  C: 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #75)"
for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    $r = $class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #76)"
get_dom_implementation
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #78)"
 ($features);
    last C if defined $r;
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #79)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #81)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #83)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #85)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #89)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #87)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #88)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #90)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #92)"
}
$r}
sub get_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #98)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #96)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #94)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #95)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #97)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #99)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #146)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #100)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #101)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #107)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #105)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #103)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #104)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #106)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #108)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #112)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #110)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #111)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #113)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #139)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #137)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #135)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #115)"

  $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #116)"
Message::DOM::DOMFeature::ManakaiImplementationList
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #118)"
->new;
  for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    if ($class->isa (
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #119)"
'Message::DOM::IFLatest::ImplementationSource'
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #121)"
)) {
      $r->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #122)"
append_items
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #124)"

              ($class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #125)"
get_implementation_list
#line 8 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #127)"
 ($features));
    } else {
      $r->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #128)"
append_items
#line 10 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #130)"

              ($class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #131)"
get_dom_implementation_list
#line 11 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #133)"
 ($features));
    }
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #134)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #136)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #138)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #140)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #144)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #142)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #143)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #145)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #147)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #153)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #151)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #149)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #150)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #152)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #154)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #198)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #161)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #156)"
$features->{core}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #157)"
1
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #159)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #160)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #162)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #168)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #166)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #164)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #165)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #167)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #169)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #173)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #171)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #172)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #174)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #191)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #189)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #187)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #176)"

  $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #177)"
Message::DOM::DOMFeature::ManakaiImplementationList
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #179)"
->new;
  for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    $r->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #180)"
append_items
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #182)"

              ($class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #183)"
get_dom_implementation_list
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #185)"
 ($features));
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #186)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #188)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #190)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #192)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #196)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=ImplementationRegistry][@QName=def|ImplRegDescription][@QName=def|ImplRegJava][@QName=def|ImplRegECMAScript][@QName=def|ImplRegPerl][@type=DISLang|Class][@type=dis|MultipleResource][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation][@type=doc|Documentation]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #194)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #195)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #197)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #199)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ImplementationRegistry>} = {};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ImplementationRegistry>} = 0;
package Message::DOM::IFLatest::ImplementationList;
our $VERSION = 20051012.1442;
package Message::DOM::DOMFeature::ManakaiImplementationList;
our $VERSION = 20051012.1442;
push our @ISA, 'Message::DOM::IF::ImplementationList', 'Message::DOM::IFLatest::ImplementationList', 'Message::DOM::IFLevel3::ImplementationList';
sub FETCH ($$) {
my ($self, $index) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=item][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #208)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=item][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #206)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=item][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #201)"
(not defined $index or
    $index < 0 or
    $index > $#$self) {
  $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #202)"
undef
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=item][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #204)"
;
} else {
  $r = $self->[$index];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #205)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #207)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #209)"
}
$r}
*item = \&FETCH;
sub length ($;$) {
if (@_ == 1) {
#line 1 "lib/Message/DOM/DOMFeature.dis [bc] (Chunk #217)"
my ($self) = @_;
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Attr[@Name=length][@type=DISLang|Attribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=DISLang|AttributeGet]/PerlCDef [b] (Chunk #215)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Attr[@Name=length][@type=DISLang|Attribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=DISLang|AttributeGet]/PerlCDef [bc] (Chunk #213)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Attr[@Name=length][@type=DISLang|Attribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=DISLang|AttributeGet]/PerlCDef [u] (Chunk #211)"
$r = @$self;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #212)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #214)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #216)"
}
$r;

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #218)"
} else {
#line 1 "lib/Message/DOM/DOMFeature.dis [bc] (Chunk #219)"
my ($self) = @_;
report Message::Util::Error::DOMException::CoreException -object => $self, '-type' => 'NO_MODIFICATION_ALLOWED_ERR', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#on' => 'get', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#subtype' => 'http://suika.fam.cx/~wakaba/archive/2005/manakai/Util/Error/DOMException#READ_ONLY_ATTRIBUTE_ERR', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#class' => 'Message::DOM::DOMFeature::ManakaiImplementationList', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#attr' => 'length';

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #220)"
}
}
sub new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #226)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #224)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #222)"
$r = bless [], ref $self ? ref $self : $self;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #223)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #225)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #227)"
}
$r}
sub append_items ($$) {
my ($self, $list) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=appendItems][@type=DISLang|Method]/Return[@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #236)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=appendItems][@type=DISLang|Method]/Return[@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #234)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=appendItems][@type=DISLang|Method]/Return[@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #229)"
($list->isa (
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #230)"
'Message::DOM::IFLatest::ImplementationList'
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@QName=ManakaiImplementationList][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=appendItems][@type=DISLang|Method]/Return[@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #232)"
)) {
  push @$self, @$list;
} else {
  push @$self, $list;
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #233)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #235)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #237)"
}
}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiImplementationList>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'', '1', '3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiImplementationList>} = 3;
package Message::DOM::IFLatest::ImplementationSource;
our $VERSION = 20051012.1442;
package Message::DOM::DOMFeature::ManakaiImplementationSource;
our $VERSION = 20051012.1442;
push our @ISA, 'Message::DOM::IF::ImplementationSource', 'Message::DOM::IFLatest::ImplementationSource', 'Message::DOM::IFLevel3::ImplementationSource';
sub get_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #243)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #241)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #239)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #240)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #242)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #244)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #289)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #248)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #246)"
$debug = $Message::DOM::DOMFeature::DEBUG
          ? sub ($@) { print STDERR (('  ' x shift), @_) }
          : sub ($@) {};
CLS: for my $class (grep {
  $Message::DOM::ManakaiDOMImplementationSource::SourceClass{$_}
} keys %Message::DOM::ManakaiDOMImplementationSource::SourceClass) {
  $debug->(1, qq<Class "$class"...\n>);
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #247)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #249)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #258)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #256)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #251)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #252)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #254)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF(?:Level.|Latest)?::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #255)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #257)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #259)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #269)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #261)"
;
  for my $fname (keys %$features) {
    my $fkey = $fname;
    my $plus = $fname =~ s/^\+// ? 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #262)"
1 : 
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #264)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #265)"
0
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #267)"
;
    $debug->(2, qq<Feature "$fname">, ($plus?'+':''), qq<,\n>);
    FVER: for my $fver (grep {$features->{$fkey}->{$_}}
                           keys %{$features->{$fkey}}) {
      $debug->(3, qq<version "$fver"...\n>);
      for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
        if ($Message::DOM::ImplFeature{$class}->{$fname}->{$fver} ||=
               ## (Caching)
            $Message::DOM::ImplFeature{$cls}->{$fname}->{$fver}) {
          $debug->(4, qq<found in "$cls"\n>);
          next FVER; # Feature/version found
        }
      }

      if ($plus) {
        if ($Message::DOM::ManakaiDOMImplementation::CompatClass{
              $class}) {
          my %compat_cls;
          for my $cls (grep {
            $Message::DOM::ManakaiDOMImplementation::CompatClass{
            $_}
          } keys
          %Message::DOM::ManakaiDOMImplementation::CompatClass) {
            next if $compat_cls{$cls};
            
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #268)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #270)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #279)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #277)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #272)"
($Message::DOM::ClassISA{$cls}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($cls);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #273)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #275)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF(?:Level.|Latest)?::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$cls} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #276)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #278)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #280)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #287)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #282)"
;
            for my $c (@{$Message::DOM::ClassISA{$cls}}) {
              $compat_cls{$c} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #283)"
1
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #285)"
;
            }                 
          }
          for my $cls (keys %compat_cls) {
            if ($Message::DOM::ImplFeature{$cls}
                  ->{$fname}->{$fver}) {
              $debug->(4, qq<found+ in "$cls"\n>);
              next FVER; # +Feature/ver found
            }
          }
        }
      }
      $debug->(2, qq<not found\n>);
      next CLS; # Not found
    } # FVER
  } # FNAME

  ## Class found
  $r = $class->_new;
  last CLS;    ## NOTE: Method name directly written
} # CLS
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #286)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #288)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #290)"
}
$r}
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #296)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #294)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #292)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #293)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #295)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #297)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #323)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #304)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #299)"
$features->{'core'}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #300)"
1
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #302)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #303)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #305)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #316)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #314)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #312)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #307)"

  $r = $self->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #308)"
get_implementation
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #310)"
 ($features);

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #311)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #313)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #315)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #317)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #321)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementation][@type=DISLang|Method]/Return[@Type=MinimumImplementation][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #319)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #320)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #322)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #324)"
}
$r}
sub get_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #330)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #328)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #326)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #327)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #329)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #331)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #379)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #338)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #333)"
$r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #334)"
'Message::DOM::DOMFeature::ManakaiImplementationList'
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #336)"
->new;
CLS: for my $class (grep {
  $Message::DOM::ManakaiDOMImplementationSource::SourceClass{$_}
} keys %Message::DOM::ManakaiDOMImplementationSource::SourceClass) {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #337)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #339)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #348)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #346)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #341)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #342)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #344)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF(?:Level.|Latest)?::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #345)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #347)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #349)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #359)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #351)"
;
  for my $fname (keys %$features) {
    my $fkey = $fname;
    my $plus = $fname =~ s/^\+// ? 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #352)"
1 : 
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #354)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #355)"
0
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #357)"
;
    FVER: for my $fver (grep {$features->{$fkey}->{$_}}
                           keys %{$features->{$fkey}}) {
      for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
        if ($Message::DOM::ImplFeature{$class}->{$fname}->{$fver} ||=
               ## (Caching)
            $Message::DOM::ImplFeature{$cls}->{$fname}->{$fver}) {
          next FVER; # Feature/version found
        }
      }

      if ($plus) {
        if ($Message::DOM::ManakaiDOMImplementation::CompatClass{
              $class}) {
          my %compat_cls;
          for my $cls (grep {
            $Message::DOM::ManakaiDOMImplementation::CompatClass{
            $_}
          } keys
          %Message::DOM::ManakaiDOMImplementation::CompatClass) {
            next if $compat_cls{$cls};
            
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #358)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #360)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #369)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #367)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #362)"
($Message::DOM::ClassISA{$cls}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($cls);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #363)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #365)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF(?:Level.|Latest)?::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$cls} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #366)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #368)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #370)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #377)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #372)"
;
            for my $c (@{$Message::DOM::ClassISA{$cls}}) {
              $compat_cls{$c} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #373)"
1
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #375)"
;
            }                 
          }
          for my $cls (keys %compat_cls) {
            if ($Message::DOM::ImplFeature{$cls}
                  ->{$fname}->{$fver}) {
              next FVER; # +Feature/ver found
            }
          }
        }
      }
      next CLS; # Not found
    } # FVER
  } # FNAME

  ## Class found
  push @$r, $class->_new;
  last CLS;                 ## NOTE: Method name directly written
} # CLS
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #376)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #378)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #380)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #386)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #384)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #382)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #383)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #385)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #387)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #410)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #388)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #389)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #403)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #401)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #399)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #391)"

  $features->{core}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #392)"
1
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #394)"
;
  $r = $self->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #395)"
get_implementation_list
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #397)"
 ($features);

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #398)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #400)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #402)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #404)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #408)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@QName=ManakaiImplementationSource][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getDOMImplementationList][@type=DISLang|Method]/Return[@Type=ImplementationList][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #406)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #407)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #409)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #411)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiImplementationSource>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'', '1', '3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiImplementationSource>} = 3;
$Message::DOM::ManakaiDOMImplementationRegistry::SourceClass{q<Message::DOM::DOMFeature::ManakaiImplementationSource>} = 1;
package Message::DOM::IFLatest::MinimumImplementation;
our $VERSION = 20051012.1442;
package Message::DOM::DOMFeature::ManakaiMinimumImplementation;
our $VERSION = 20051012.1442;
push our @ISA, 'Message::Util::ManakaiNode::ManakaiNodeRef', 'Message::DOM::IF::GetFeature', 'Message::DOM::IF::MinimumImplementation', 'Message::DOM::IFLatest::GetFeature', 'Message::DOM::IFLatest::MinimumImplementation', 'Message::DOM::IFLevel3::GetFeature', 'Message::DOM::IFLevel3::MinimumImplementation';
sub has_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #417)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #415)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #413)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #414)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #416)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #418)"
}

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #424)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #422)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #420)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #421)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #423)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #425)"
}
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #449)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #429)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #427)"
$plus = $feature =~ s/^\+// ? 1 : 0;
my $class = ref $self;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #428)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #430)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #439)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #437)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #432)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #433)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #435)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF(?:Level.|Latest)?::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #436)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #438)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #440)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #447)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #442)"
;
if (defined $Message::DOM::ImplFeature{$class}
                    ->{$feature}->{$version}) {
  $r = $Message::DOM::ImplFeature{$class}
                    ->{$feature}->{$version};
} elsif ($plus) {
  CLASS: for my $class (grep {
    $Message::DOM::ManakaiDOMImplementation::CompatClass{$_}
  } keys %Message::DOM::ManakaiDOMImplementation::CompatClass) {
    for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
      if ($Message::DOM::ImplFeature{$class}
                       ->{$feature}->{$version}) {
        $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #443)"
1
#line 13 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #445)"
;
        last CLASS;
      }
    }
  }
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #446)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #448)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #450)"
}
$r}
sub get_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #456)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #454)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #452)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #453)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #455)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #457)"
}

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #463)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #461)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #459)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #460)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #462)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #464)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getFeature][@type=DISLang|Method]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #506)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getFeature][@type=DISLang|Method]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #468)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getFeature][@type=DISLang|Method]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #466)"
$feature =~ s/^\+//;
CLASS: for my $class (grep {
  $Message::DOM::ManakaiDOMImplementation::CompatClass{$_}
} keys %Message::DOM::ManakaiDOMImplementation::CompatClass) {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #467)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #469)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #478)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #476)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #471)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #472)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #474)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF(?:Level.|Latest)?::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #475)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #477)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #479)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getFeature][@type=DISLang|Method]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #483)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getFeature][@type=DISLang|Method]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #481)"
;
  for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
    if ($Message::DOM::ImplFeature{$class}->{$feature}->{$version}) {
      
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #482)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #484)"

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [b] (Chunk #499)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [bc] (Chunk #497)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #486)"
$self->{'node'}->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #487)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #489)"
}++;
${$self->{'node'}->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #490)"
'grc'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #492)"
}}++;
$r = bless {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #493)"
'node'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #495)"
 => $self->{'node'},
}, $class;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #496)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #498)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #500)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getFeature][@type=DISLang|Method]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #504)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=getFeature][@type=DISLang|Method]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #502)"
;
      last CLASS;
    }
  }
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #503)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #505)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #507)"
}
$r}
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [b] (Chunk #543)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #514)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #509)"
$node = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #510)"
Message::Util::ManakaiNode::ManakaiNodeStem->_new
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #512)"

               ($self);

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #513)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #515)"

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [b] (Chunk #530)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [bc] (Chunk #528)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #517)"
$node->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #518)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #520)"
}++;
${$node->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #521)"
'grc'
#line 2 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #523)"
}}++;
$r = bless {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #524)"
'node'
#line 4 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@QName=ManakaiNodeStem][@type=dis:MultipleResource][@type=DISLang|Interface][@type=DISLang|Class]/ResourceDef[@QName=getNewReference][@type=DISPerl|BlockCode]/PerlDef [u] (Chunk #526)"
 => $node,
}, $self;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #527)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #529)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #531)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [bc] (Chunk #541)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #533)"
;
$node->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #534)"
'implid'
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #536)"
} = $node->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #537)"
'nid'
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@QName=ManakaiMinimumImplementation][@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@type=DISLang|Class]/Method[@Name=new][@type=DISLang|Method]/Return[@Type=ManakaiMinimumImplementation][@type=DISLang|MethodReturn]/PerlDef [u] (Chunk #539)"
};
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #540)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #542)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #544)"
}
$r}
$Message::DOM::ImplFeature{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>}->{q<http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum>}->{q<3.0>} ||= 1;
$Message::DOM::ImplFeature{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>}->{q<http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum>}->{q<>} = 1;
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'', '1', '3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = 3;
$Message::DOM::ManakaiDOMImplementationSource::SourceClass{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = 1;
$Message::DOM::ManakaiDOMImplementation::CompatClass{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = 1;
$Message::Util::ManakaiNode::ManakaiNodeRef::Prop{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = {};
package Message::DOM::IFLatest::GetFeature;
our $VERSION = 20051012.1442;
package Message::DOM::DOMFeature::ManakaiHasFeatureByGetFeature;
our $VERSION = 20051012.1442;
sub has_feature ($$;$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #550)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #548)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #546)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #547)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #549)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #551)"
}

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #557)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #555)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=DISLang|DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #553)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #554)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #556)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #558)"
}
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #584)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #559)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #560)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #577)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [b] (Chunk #575)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #573)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #562)"

  $r = defined $self->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #563)"
get_feature
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #565)"
 ($feature, $version)
       ? 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #566)"
1 : 
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #568)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #569)"
0
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #571)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #572)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #574)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #576)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #578)"
}

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [bc] (Chunk #582)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@type=dis|MultipleResource][@type=DISLang|Interface][@type=idl|Interface][@QName=GetFeature][@type=DISLang|Class][@QName=ManakaiHasFeatureByGetFeature]/Method[@Name=hasFeature][@type=DISLang|Method]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=DISLang|MethodReturn]/PerlCDef [u] (Chunk #580)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #581)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #583)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #585)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiHasFeatureByGetFeature>} = {};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiHasFeatureByGetFeature>} = 0;
for ($Message::DOM::IF::GetFeature::, $Message::DOM::IF::ImplementationList::, $Message::DOM::IF::ImplementationSource::, $Message::DOM::IF::MinimumImplementation::, $Message::DOM::IFLevel3::GetFeature::, $Message::DOM::IFLevel3::ImplementationList::, $Message::DOM::IFLevel3::ImplementationSource::, $Message::DOM::IFLevel3::MinimumImplementation::){}
## License: <http://suika.fam.cx/~wakaba/archive/2004/8/18/license#Perl+MPL>
1;
