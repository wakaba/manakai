#!/usr/bin/perl 
## This file is automatically generated
## 	at 2005-09-04T14:58:03+00:00,
## 	from file "lib/Message/DOM/DOMFeature.dis",
## 	module <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#ManakaiDOM.DOMFeature>,
## 	for <http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#ManakaiDOMLatest>.
## Don't edit by hand!
use strict;
require Message::Util::ManakaiNode;
package Message::DOM::DOMFeature;
our $VERSION = 20050904.1458;
$Message::DOM::ImplementationRegistry = 'Message::DOM::DOMFeature::DOMImplementationRegistry';
$Message::DOM::DOMImplementationRegistry = 'Message::DOM::DOMFeature::DOMImplementationRegistry';
package Message::DOM::DOMFeature::DOMImplementationRegistry;
our $VERSION = 20050904.1458;
push our @ISA, 'Message::DOM::IFLatest::ImplementationSource';
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #5)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #3)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #1)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #2)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #4)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #6)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #37)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #11)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #7)"
$features->{core}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #8)"
1
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #9)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #10)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #12)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #17)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #15)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #13)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #14)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #16)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #18)"
}

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #21)"

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #19)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #20)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #22)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #31)"
local $Error::Depth = $Error::Depth + 1;

{
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #29)"

#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #27)"

  C: 
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #23)"
for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    $r = $class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #24)"
get_dom_implementation
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #25)"
 ($features);
    last C if defined $r;
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #26)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #28)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #30)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #32)"
}

#line 12 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #35)"

#line 12 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #33)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #34)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #36)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #38)"
}
$r}
sub get_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #43)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #41)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #39)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #40)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #42)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #44)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #75)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #45)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #46)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #51)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #49)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #47)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #48)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #50)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #52)"
}

#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #55)"

#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #53)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #54)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #56)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #69)"
local $Error::Depth = $Error::Depth + 1;

{
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #67)"

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #65)"

  C: 
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #57)"
for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    if ($class->isa (
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #58)"
'Message::DOM::IFLatest::ImplementationSource'
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #59)"
)) {
      $r = $class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #60)"
get_implementation
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #61)"
 ($features);
    } else {
      $r = $class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #62)"
get_dom_implementation
#line 9 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #63)"
 ($features);
    }
    last C if defined $r;
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #64)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #66)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #68)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #70)"
}

#line 16 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #73)"

#line 16 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #71)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #72)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #74)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #76)"
}
$r}
sub get_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #81)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #79)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #77)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #78)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #80)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #82)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #119)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #83)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #84)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #89)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #87)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #85)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #86)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #88)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #90)"
}

#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #93)"

#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #91)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #92)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #94)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #113)"
local $Error::Depth = $Error::Depth + 1;

{
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #111)"

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #109)"

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #95)"

  $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #96)"
Message::DOM::DOMFeature::ManakaiImplementationList
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #97)"
->new;
  for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    if ($class->isa (
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #98)"
'Message::DOM::IFLatest::ImplementationSource'
#line 8 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #99)"
)) {
      $r->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #100)"
append_items
#line 9 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #101)"

              ($class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #102)"
get_implementation_list
#line 10 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #103)"
 ($features));
    } else {
      $r->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #104)"
append_items
#line 12 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #105)"

              ($class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #106)"
get_dom_implementation_list
#line 13 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #107)"
 ($features));
    }
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #108)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #110)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #112)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #114)"
}

#line 18 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #117)"

#line 18 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #115)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #116)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #118)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #120)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #125)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #123)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #121)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #122)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #124)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #126)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #161)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #131)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #127)"
$features->{core}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #128)"
1
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #129)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #130)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #132)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #137)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #135)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/ResourceDef[@QName=DOMMain:stringifyFeatures][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #133)"
@out;
for my $fname (keys %{$features}) {
  for my $fver (keys %{$features->{$fname}}) {
    push @out, $fname . ' ' . $fver . ' ' if $features->{$fname}->{$fver};
  }
}
$features = join ' ', @out;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #134)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #136)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #138)"
}

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #141)"

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #139)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #140)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #142)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #155)"
local $Error::Depth = $Error::Depth + 1;

{
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #153)"

#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #151)"

#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #143)"

  $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #144)"
Message::DOM::DOMFeature::ManakaiImplementationList
#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #145)"
->new;
  for my $class (
    keys %Message::DOM::ManakaiDOMImplementationRegistry::SourceClass
  ) {
    $r->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #146)"
append_items
#line 9 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #147)"

              ($class->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #148)"
get_dom_implementation_list
#line 10 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #149)"
 ($features));
  }

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #150)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #152)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #154)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #156)"
}

#line 13 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #159)"

#line 13 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=DOMImplementationRegistry][@type=ManakaiDOM|Class]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #157)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #158)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #160)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #162)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::DOMImplementationRegistry>} = {};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::DOMImplementationRegistry>} = 0;
package Message::DOM::DOMFeature::ManakaiImplementationList;
our $VERSION = 20050904.1458;
push our @ISA, 'Message::DOM::IF::ImplementationList', 'Message::DOM::IFLatest::ImplementationList', 'Message::DOM::IFLevel3::ImplementationList';
sub append_items ($$) {
my ($self, $list) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=appendItems][@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #169)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=appendItems][@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #167)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=appendItems][@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #163)"
($list->isa (
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #164)"
'Message::DOM::IFLatest::ImplementationList'
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=appendItems][@type=ManakaiDOM:DOMMethod]/Return[@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #165)"
)) {
  push @$self, @$list;
} else {
  push @$self, $list;
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #166)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #168)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #170)"
}
}
sub length ($;$) {
if (@_ == 1) {
#line 1 "lib/Message/DOM/DOMFeature.dis [bc] (Chunk #177)"
my ($self) = @_;
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Attr[@Name=length][@type=ManakaiDOM:DOMAttribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=ManakaiDOM:DOMAttrGet]/PerlDef [b] (Chunk #175)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Attr[@Name=length][@type=ManakaiDOM:DOMAttribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=ManakaiDOM:DOMAttrGet]/PerlDef [bc] (Chunk #173)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Attr[@Name=length][@type=ManakaiDOM:DOMAttribute]/Get[@Type=DOMMain:unsigned-long::ManakaiDOM:all][@type=ManakaiDOM:DOMAttrGet]/PerlDef [u] (Chunk #171)"
$r = @$self;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #172)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #174)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #176)"
}
$r;

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #178)"
} else {
#line 1 "lib/Message/DOM/DOMFeature.dis [bc] (Chunk #179)"
my ($self) = @_;
report Message::Util::Error::DOMException::CoreException -object => $self, '-type' => 'NO_MODIFICATION_ALLOWED_ERR', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#on' => 'get', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#subtype' => 'http://suika.fam.cx/~wakaba/archive/2005/manakai/Util/Error/DOMException#READ_ONLY_ATTRIBUTE_ERR', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#class' => 'Message::DOM::DOMFeature::ManakaiImplementationList', 'http://suika.fam.cx/~wakaba/archive/2004/8/4/manakai-dom-exception#attr' => 'length';

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #180)"
}}
sub item ($$) {
my ($self, $index) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #187)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #185)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #181)"
(not defined $index or
    $index < 0 or
    $index > $#$self) {
  $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #182)"
undef
#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@Name=item][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #183)"
;
} else {
  $r = $self->[$index];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #184)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #186)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #188)"
}
$r}
sub new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #193)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #191)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationList][@type=dis|MultipleResource]/Method[@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #189)"
$r = bless [], ref $self ? ref $self : $self;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #190)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #192)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #194)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiImplementationList>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'', '1', '3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiImplementationList>} = 3;
package Message::DOM::DOMFeature::ManakaiImplementationSource;
our $VERSION = 20050904.1458;
push our @ISA, 'Message::DOM::IF::ImplementationSource', 'Message::DOM::IFLatest::ImplementationSource', 'Message::DOM::IFLevel3::ImplementationSource';
sub get_dom_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #199)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #197)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #195)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #196)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #198)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #200)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #221)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #205)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #201)"
$features->{'core'}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #202)"
1
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #203)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #204)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #206)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #215)"
local $Error::Depth = $Error::Depth + 1;

{
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #213)"

#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #211)"

#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #207)"

  $r = $self->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #208)"
get_implementation
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #209)"
 ($features);

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #210)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #212)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #214)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #216)"
}

#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #219)"

#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #217)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #218)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #220)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #222)"
}
$r}
sub get_implementation ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #227)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #225)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #223)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #224)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #226)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #228)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #263)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #231)"
CLS: 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #229)"
for my $class (grep {
  $Message::DOM::ManakaiDOMImplementationSource::SourceClass{$_}
} keys %Message::DOM::ManakaiDOMImplementationSource::SourceClass) {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #230)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #232)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #239)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #237)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #233)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #234)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #235)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #236)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #238)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #240)"
}

#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #247)"

#line 4 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #241)"
;
  for my $fname (keys %$features) {
    my $fkey = $fname;
    my $plus = $fname =~ s/^\+// ? 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #242)"
1 : 
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #243)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #244)"
0
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #245)"
;
    FVER: for my $fver (grep {$features->{$fkey}->{$_}}
                           keys %{$features->{$fkey}}) {
      for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
        if ($Message::DOM::ImplFeature{$class}->{$fname}->{$fver} ||=
               ## (Caching)
            $Message::DOM::ImplFeature{$cls}->{$fname}->{$fver}) {
          next FVER; # Feature/version found
        }
      }

      if ($plus) {
        if ($Message::DOM::ManakaiDOMImplementation::CompatClass{
              $class}) {
          my %compat_cls;
          for my $cls (grep {
            $Message::DOM::ManakaiDOMImplementation::CompatClass{
            $_}
          } keys
          %Message::DOM::ManakaiDOMImplementation::CompatClass) {
            next if $compat_cls{$cls};
            
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #246)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #248)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #255)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #253)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #249)"
($Message::DOM::ClassISA{$cls}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($cls);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #250)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #251)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$cls} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #252)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #254)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #256)"
}

#line 28 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #261)"

#line 28 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #257)"
;
            for my $c (@{$Message::DOM::ClassISA{$cls}}) {
              $compat_cls{$c} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #258)"
1
#line 30 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementation][@type=ManakaiDOM:DOMMethod]/Return[@Type=MinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #259)"
;
            }                 
          }
          for my $cls (keys %compat_cls) {
            if ($Message::DOM::ImplFeature{$cls}
                  ->{$fname}->{$fver}) {
              next FVER; # +Feature/ver found
            }
          }
        }
      }
      next CLS; # Not found
    } # FVER
  } # FNAME

  ## Class found
  $r = $class->_new;
  last CLS;    ## NOTE: Method name directly written
} # CLS
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #260)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #262)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #264)"
}
$r}
sub get_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #269)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #267)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #265)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #266)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #268)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #270)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #307)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #275)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #271)"
$r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #272)"
'Message::DOM::DOMFeature::ManakaiImplementationList'
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #273)"
->new;
CLS: for my $class (grep {
  $Message::DOM::ManakaiDOMImplementationSource::SourceClass{$_}
} keys %Message::DOM::ManakaiDOMImplementationSource::SourceClass) {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #274)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #276)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #283)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #281)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #277)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #278)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #279)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #280)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #282)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #284)"
}

#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #291)"

#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #285)"
;
  for my $fname (keys %$features) {
    my $fkey = $fname;
    my $plus = $fname =~ s/^\+// ? 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #286)"
1 : 
#line 8 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #287)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #288)"
0
#line 8 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #289)"
;
    FVER: for my $fver (grep {$features->{$fkey}->{$_}}
                           keys %{$features->{$fkey}}) {
      for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
        if ($Message::DOM::ImplFeature{$class}->{$fname}->{$fver} ||=
               ## (Caching)
            $Message::DOM::ImplFeature{$cls}->{$fname}->{$fver}) {
          next FVER; # Feature/version found
        }
      }

      if ($plus) {
        if ($Message::DOM::ManakaiDOMImplementation::CompatClass{
              $class}) {
          my %compat_cls;
          for my $cls (grep {
            $Message::DOM::ManakaiDOMImplementation::CompatClass{
            $_}
          } keys
          %Message::DOM::ManakaiDOMImplementation::CompatClass) {
            next if $compat_cls{$cls};
            
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #290)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #292)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #299)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #297)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #293)"
($Message::DOM::ClassISA{$cls}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($cls);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #294)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #295)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$cls} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #296)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #298)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #300)"
}

#line 29 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #305)"

#line 29 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #301)"
;
            for my $c (@{$Message::DOM::ClassISA{$cls}}) {
              $compat_cls{$c} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #302)"
1
#line 31 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #303)"
;
            }                 
          }
          for my $cls (keys %compat_cls) {
            if ($Message::DOM::ImplFeature{$cls}
                  ->{$fname}->{$fver}) {
              next FVER; # +Feature/ver found
            }
          }
        }
      }
      next CLS; # Not found
    } # FVER
  } # FNAME

  ## Class found
  push @$r, $class->_new;
  last CLS;                 ## NOTE: Method name directly written
} # CLS
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #304)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #306)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #308)"
}
$r}
sub get_dom_implementation_list ($$) {
my ($self, $features) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #313)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #311)"
if 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeaturesString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #309)"
(CORE::defined $features) {
  if (CORE::ref ($features) eq 'HASH') {
    my $new = {};
    for my $fname (keys %{$features}) {
      if (CORE::ref ($features->{$fname}) eq 'HASH') {
        my $lfname = lc $fname;
        for my $fver (keys %{$features->{$fname}}) {
          $new->{$lfname}->{$fver} = $features->{$fname}->{$fver};
        }
      } else {
        $new->{lc $fname} = {(CORE::defined $features->{$fname}
                                ? $features->{$fname} : '') => 1};
      }
    }
    $features = $new;
  } else {
    my @f = split /\s+/, $features;
    $features = {};
    while (@f) {
      my $name = lc shift @f;
      if (@f and $f[0] =~ /^[\d\.]+$/) {
        $features->{$name}->{shift @f} = 1;
      } else {
        $features->{$name}->{''} = 1;
      }
    }
  }
} else {
  $features = {};
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #310)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #312)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #314)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #333)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #315)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #316)"

{
#line 1 "lib/Message/DOM/DOMFeature.dis [b] (Chunk #327)"
local $Error::Depth = $Error::Depth + 1;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #325)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #323)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #317)"

  $features->{core}->{'3.0'} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #318)"
1
#line 2 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #319)"
;
  $r = $self->
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #320)"
get_implementation_list
#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #321)"
 ($features);

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #322)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #324)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #326)"
}

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #328)"
}

#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #331)"

#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=ImplementationSource][@type=dis|MultipleResource]/Method[@Name=getDOMImplementationList][@type=ManakaiDOM:DOMMethod]/Return[@Type=ImplementationList][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #329)"
;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #330)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #332)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #334)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiImplementationSource>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'', '1', '3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiImplementationSource>} = 3;
$Message::DOM::ManakaiDOMImplementationRegistry::SourceClass{q<Message::DOM::DOMFeature::ManakaiImplementationSource>} = 1;
package Message::DOM::DOMFeature::ManakaiMinimumImplementation;
our $VERSION = 20050904.1458;
push our @ISA, 'Message::Util::ManakaiNode::ManakaiNodeRef', 'Message::DOM::IF::GetFeature', 'Message::DOM::IF::MinimumImplementation', 'Message::DOM::IFLatest::GetFeature', 'Message::DOM::IFLatest::MinimumImplementation', 'Message::DOM::IFLevel3::GetFeature', 'Message::DOM::IFLevel3::MinimumImplementation';
sub _new ($) {
my ($self) = @_;
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #359)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #339)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #335)"
$node = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #336)"
Message::Util::ManakaiNode::ManakaiNodeStem->_new
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #337)"
;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #338)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #340)"

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #349)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #347)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #341)"
$node->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #342)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #343)"
}++;
$r = bless {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #344)"
'node'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #345)"
 => $node,
}, $self;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #346)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #348)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #350)"
}

#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #357)"

#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #351)"
;
$node->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #352)"
'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#implID'
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #353)"
} = $node->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #354)"
'nodeID'
#line 7 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=new][@type=ManakaiDOM:DOMMethod]/Return[@Type=ManakaiMinimumImplementation][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #355)"
};
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #356)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #358)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #360)"
}
$r}
sub get_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #365)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #363)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #361)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #362)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #364)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #366)"
}

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #371)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #369)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #367)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #368)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #370)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #372)"
}
my $r;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #403)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #375)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #373)"
$feature =~ s/^\+//;
CLASS: for my $class (grep {
  $Message::DOM::ManakaiDOMImplementation::CompatClass{$_}
} keys %Message::DOM::ManakaiDOMImplementation::CompatClass) {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #374)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #376)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #383)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #381)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #377)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #378)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #379)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #380)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #382)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #384)"
}

#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #387)"

#line 5 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #385)"
;
  for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
    if ($Message::DOM::ImplFeature{$class}->{$feature}->{$version}) {
      
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #386)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #388)"

{
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #397)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #395)"

#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #389)"
$self->{'node'}->{
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #390)"
'rc'
#line 1 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #391)"
}++;
$r = bless {
  
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #392)"
'node'
#line 3 "/document (lib/Message/Util/ManakaiNode.dis)/ClassDef[@QName=NodeStem][@type=dis:MultipleResource]/ResourceDef[@QName=getNewReference][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #393)"
 => $self->{'node'},
}, $class;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #394)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #396)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #398)"
}

#line 12 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #401)"

#line 12 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=getFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain|Object||ManakaiDOM|all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #399)"
;
      last CLASS;
    }
  }
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #400)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #402)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #404)"
}
$r}
sub has_feature ($$$) {
my ($self, $feature, $version) = @_;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #409)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #407)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureNameString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #405)"
$feature = lc $feature;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #406)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #408)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #410)"
}

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [b] (Chunk #415)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [bc] (Chunk #413)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/StringDataTypeDef[@QName=FeatureVersionString][@type=ManakaiDOM:DataType]/InputProcessor[@type=DISLang:InputProcessor]/PerlDef [u] (Chunk #411)"
$version = '' unless defined $version;
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #412)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #414)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #416)"
}
my $r = 0;

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [b] (Chunk #435)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #419)"
my 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #417)"
$plus = $feature =~ s/^\+// ? 1 : 0;
my $class = ref $self;

#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #418)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #420)"

{
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [b] (Chunk #427)"

#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [bc] (Chunk #425)"
unless 
#line 1 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #421)"
($Message::DOM::ClassISA{$class}) {
  no strict 'refs';
  my %__class;
  my @__chk = ($class);
  while (my $__chk = shift @__chk) {
    $__class{$__chk} = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #422)"
1
#line 6 "/document (lib/Message/DOM/DOMFeature.dis)/ResourceDef[@QName=makeClassISAList][@type=dis2pm:BlockCode]/PerlDef [u] (Chunk #423)"
;
    for my $__isa (@{$__chk . '::ISA'}) {
      if ($__isa !~ /::IF::/ and 
          not $__class{$__isa}) {
        push @__chk, $__isa;
      }
    }
  }
  $Message::DOM::ClassISA{$class} = [keys %__class];
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #424)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #426)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #428)"
}

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [bc] (Chunk #433)"

#line 3 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #429)"
;
if (defined $Message::DOM::ImplFeature{$class}
                    ->{$feature}->{$version}) {
  $r = $Message::DOM::ImplFeature{$class}
                    ->{$feature}->{$version};
} elsif ($plus) {
  CLASS: for my $class (grep {
    $Message::DOM::ManakaiDOMImplementation::CompatClass{$_}
  } keys %Message::DOM::ManakaiDOMImplementation::CompatClass) {
    for my $cls ($class, @{$Message::DOM::ClassISA{$class}}) {
      if ($Message::DOM::ImplFeature{$class}
                       ->{$feature}->{$version}) {
        $r = 
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #430)"
1
#line 15 "/document (lib/Message/DOM/DOMFeature.dis)/minIFClsDef[@QName=MinimumImplementation][@type=dis|MultipleResource]/Method[@Name=hasFeature][@type=ManakaiDOM:DOMMethod]/Return[@Type=DOMMain:boolean::ManakaiDOM:all][@type=ManakaiDOM:DOMMethodReturn]/PerlDef [u] (Chunk #431)"
;
        last CLASS;
      }
    }
  }
}
#line 1 "lib/Message/DOM/DOMFeature.dis [/u] (Chunk #432)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/bc] (Chunk #434)"

#line 1 "lib/Message/DOM/DOMFeature.dis [/b] (Chunk #436)"
}
$r}
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'', '1', '3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = 3;
$Message::DOM::ManakaiDOMImplementationSource::SourceClass{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = 1;
$Message::DOM::ManakaiDOMImplementation::CompatClass{q<Message::DOM::DOMFeature::ManakaiMinimumImplementation>} = 1;
package Message::DOM::DOMFeature::ManakaiDOMMinimumImplementation;
our $VERSION = 20050904.1458;
push our @ISA, 'Message::DOM::DOMFeature::ManakaiMinimumImplementation';
$Message::DOM::ClassFeature{q<Message::DOM::DOMFeature::ManakaiDOMMinimumImplementation>} = {'http://suika.fam.cx/~wakaba/archive/2004/8/18/manakai-dom#minimum', {'', '1', '3.0', '1'}};
$Message::DOM::ClassPoint{q<Message::DOM::DOMFeature::ManakaiDOMMinimumImplementation>} = 3;
$Message::DOM::ManakaiDOMImplementationSource::SourceClass{q<Message::DOM::DOMFeature::ManakaiDOMMinimumImplementation>} = 1;
$Message::DOM::ManakaiDOMImplementation::CompatClass{q<Message::DOM::DOMFeature::ManakaiDOMMinimumImplementation>} = 1;
for ($Message::DOM::IFLevel3::GetFeature::, $Message::DOM::IF::ImplementationList::, $Message::DOM::IFLevel3::MinimumImplementation::, $Message::DOM::IFLevel3::ImplementationSource::, $Message::DOM::IFLevel3::ImplementationList::, $Message::DOM::IFLatest::ImplementationSource::, $Message::DOM::IFLatest::MinimumImplementation::, $Message::DOM::IF::ImplementationSource::, $Message::DOM::IFLatest::ImplementationList::, $Message::DOM::IF::MinimumImplementation::, $Message::DOM::IF::GetFeature::, $Message::DOM::IFLatest::GetFeature::){}
## License: <http://suika.fam.cx/~wakaba/archive/2004/8/18/license#Perl+MPL>
1;
