
MANAKAI_ROOT_DIR = ../
BIN_DIR = $(MANAKAI_ROOT_DIR)bin/
LIB_DIR = $(MANAKAI_ROOT_DIR)lib/
LIB_DOM_DIR = $(LIB_DIR)Message/DOM/

DIS_DIR = $(LIB_DOM_DIR)
DIS_FILES = $(DIS_DIR)DOM*.dis

PERL = perl -I$(LIB_DIR)
PERLC = $(PERL) -c -w 
RM = rm -fv

MKDOMMEMLIST_PL = $(BIN_DIR)mkdommemlist.pl
MKDOMMEMLIST = $(PERL) $(MKDOMMEMLIST_PL)

DOMMEMLIST = dommemlist.pl.tmp
GENERATED_FILES = $(DOMMEMLIST)

DOM_CDIS = $(LIB_DOM_DIR)html.cdis

all: $(GENERATED_FILES)

$(DOM_CDIS): $(DIS_FILES)
	cd $(LIB_DOM_DIR) && make $<

$(DOMMEMLIST): $(DOM_CDIS) $(MKDOMMEMLIST_PL)
	$(MKDOMMEMLIST) $< > $@
	$(PERLC) $@

clean:
	$(RM) $(GENERATED_FILES) *~ .*~ *.BAK .*.BAK
